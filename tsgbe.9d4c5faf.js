parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"CvJj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.__extends=e,exports.__rest=n,exports.__decorate=o,exports.__param=a,exports.__metadata=i,exports.__awaiter=c,exports.__generator=u,exports.__exportStar=l,exports.__values=s,exports.__read=p,exports.__spread=y,exports.__spreadArrays=_,exports.__spreadArray=h,exports.__await=d,exports.__asyncGenerator=v,exports.__asyncDelegator=b,exports.__asyncValues=w,exports.__makeTemplateObject=x,exports.__importStar=O,exports.__importDefault=g,exports.__classPrivateFieldGet=j,exports.__classPrivateFieldSet=P,exports.__createBinding=exports.__assign=void 0;var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};function e(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var r=function(){return exports.__assign=r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};function n(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}function o(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i}function a(t,e){return function(r,n){e(r,n,t)}}function i(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,r,n){return new(r||(r=Promise))(function(o,a){function i(t){try{u(n.next(t))}catch(e){a(e)}}function c(t){try{u(n.throw(t))}catch(e){a(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(i,c)}u((n=n.apply(t,e||[])).next())})}function u(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(c){a=[6,c],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}exports.__assign=r;var f=Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]};function l(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||f(e,t,r)}function s(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,a=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(c){o={error:c}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function _(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var a=arguments[e],i=0,c=a.length;i<c;i++,o++)n[o]=a[i];return n}function h(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t}function d(t){return this instanceof d?(this.v=t,this):new d(t)}function v(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),a=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(t){o[t]&&(n[t]=function(e){return new Promise(function(r,n){a.push([t,e,r,n])>1||c(t,e)})})}function c(t,e){try{(r=o[t](e)).value instanceof d?Promise.resolve(r.value.v).then(u,f):l(a[0][2],r)}catch(n){l(a[0][3],n)}var r}function u(t){c("next",t)}function f(t){c("throw",t)}function l(t,e){t(e),a.shift(),a.length&&c(a[0][0],a[0][1])}}function b(t){var e,r;return e={},n("next"),n("throw",function(t){throw t}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,o){e[n]=t[n]?function(e){return(r=!r)?{value:d(t[n](e)),done:"return"===n}:o?o(e):e}:o}}function w(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof s?s(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise(function(n,o){(function(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)})(n,o,(e=t[r](e)).done,e.value)})}}}function x(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}exports.__createBinding=f;var m=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function O(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&f(e,t,r);return m(e,t),e}function g(t){return t&&t.__esModule?t:{default:t}}function j(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function P(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}
},{}],"KA2S":[function(require,module,exports) {
var define;
var t,r=function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{u({},"")}catch(P){u=function(t,r,e){return t[r]=e}}function h(t,r,e,n){var o=r&&r.prototype instanceof d?r:d,i=Object.create(o.prototype),a=new G(n||[]);return i._invoke=function(t,r,e){var n=l;return function(o,i){if(n===p)throw new Error("Generator is already running");if(n===y){if("throw"===o)throw i;return F()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=j(a,e);if(c){if(c===v)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===l)throw n=y,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=p;var u=f(t,r,e);if("normal"===u.type){if(n=e.done?y:s,u.arg===v)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n=y,e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function f(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(P){return{type:"throw",arg:P}}}t.wrap=h;var l="suspendedStart",s="suspendedYield",p="executing",y="completed",v={};function d(){}function g(){}function m(){}var w={};w[i]=function(){return this};var L=Object.getPrototypeOf,x=L&&L(L(N([])));x&&x!==e&&n.call(x,i)&&(w=x);var b=m.prototype=d.prototype=Object.create(w);function E(t){["next","throw","return"].forEach(function(r){u(t,r,function(t){return this._invoke(r,t)})})}function _(t,r){var e;this._invoke=function(o,i){function a(){return new r(function(e,a){!function e(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var h=u.arg,l=h.value;return l&&"object"==typeof l&&n.call(l,"__await")?r.resolve(l.__await).then(function(t){e("next",t,a,c)},function(t){e("throw",t,a,c)}):r.resolve(l).then(function(t){h.value=t,a(h)},function(t){return e("throw",t,a,c)})}c(u.arg)}(o,i,e,a)})}return e=e?e.then(a,a):a()}}function j(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,j(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,v;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,v):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function O(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function k(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function G(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function N(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:F}}function F(){return{value:r,done:!0}}return g.prototype=b.constructor=m,m.constructor=g,g.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===g||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},E(_.prototype),_.prototype[a]=function(){return this},t.AsyncIterator=_,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new _(h(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(b),u(b,c,"Generator"),b[i]=function(){return this},b.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,G.prototype={constructor:G,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),h=n.call(a,"finallyLoc");if(u&&h){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),v},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),k(e),v}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;k(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:N(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),v}},t}("object"==typeof module?module.exports:{});try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}
},{}],"WMXB":[function(require,module,exports) {
"use strict";function r(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}function s(r,s){for(var e=0;e<s.length;e++){var a=s[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function e(r,e,a){return e&&s(r.prototype,e),a&&s(r,a),r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Cartridge=void 0;var a=function(){function s(e){if(r(this,s),this.load(e),!this.checksum())throw new Error("[ERROR] Invalid checksum!")}return e(s,[{key:"load",value:function(r){switch(this.rom=r,this.rom[328]){case 0:this.romChunks=2;break;case 1:this.romChunks=4;break;case 2:this.romChunks=8;break;case 3:this.romChunks=16;break;case 4:this.romChunks=32;break;case 5:this.romChunks=64;break;case 6:this.romChunks=128;break;case 82:this.romChunks=72;break;case 83:this.romChunks=80;break;case 84:this.romChunks=96;break;default:this.romChunks=0}switch(this.rom[329]){case 0:this.ramChunks=0;break;case 1:case 2:this.ramChunks=1;break;case 3:this.ramChunks=4;break;case 4:this.ramChunks=16;break;case 5:this.ramChunks=32;break;default:this.ramChunks=0}this.ram=new Uint8Array(8192*this.ramChunks),this.name="";for(var s=308;s<=322;s++)this.rom[s]&&(this.name+=String.fromCharCode(this.rom[s]))}},{key:"checksum",value:function(){for(var r=(this.rom[334]<<8)+this.rom[335],s=0,e=0;e<this.rom.length;e++)334!=e&&335!=e&&(s=s+this.rom[e]&65535);return r==s}}]),s}();exports.Cartridge=a;
},{}],"mNV0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MBC0=void 0;var t=require("./cartridge");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=l();return function(){var r,n=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?a(t):r}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=function(e){u(c,t.Cartridge);var n=i(c);function c(t){return r(this,c),n.call(this,t)}return o(c,[{key:"read",value:function(t){return this.rom[t]}},{key:"write",value:function(t,e){}}]),c}();exports.MBC0=s;
},{"./cartridge":"WMXB"}],"oQlQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MBC1=void 0;var t=require("./cartridge");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=s();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?f(t):r}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(e){i(c,t.Cartridge);var n=u(c);function c(t){var e;return r(this,c),(e=n.call(this,t)).ramEnabled=!1,e.romPage=1,e.ramPage=0,e.mbcMode=0,e}return o(c,[{key:"read",value:function(t){var e=0;return t>=0&&(t<16384?e=this.rom[t]:t<32768?e=this.rom[t-16384+16384*this.romPage]:t>=40960&&t<49152&&this.ramEnabled&&(e=this.ram[t-40960+8192*this.ramPage])),e}},{key:"write",value:function(t,e){e<8192?this.ramEnabled=10==(15&t):e<16384?(this.romPage=31&t,0==this.romPage&&(this.romPage=1)):e<24576&&1==this.mbcMode?this.ramPage=3&t:e<24576&&0==this.mbcMode?this.romPage=7&this.romPage|(3&t)<<3:e<32768?this.mbcMode=1&t:e>=40960&&e<49152&&this.ramEnabled&&(this.ram[e-40960+8192*this.ramPage]=t)}}]),c}();exports.MBC1=p;
},{"./cartridge":"WMXB"}],"al9X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MBC2=void 0;var t=require("./cartridge");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=l();return function(){var r,n=s(t);if(e){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?a(t):r}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(e){i(u,t.Cartridge);var n=c(u);function u(t){var e;return r(this,u),(e=n.call(this,t)).ramEnabled=!1,e.romPage=1,e}return o(u,[{key:"read",value:function(t){var e=0;return t>=0&&(t<16384?e=this.rom[t]:t<32768?e=this.rom[t-16384+16384*this.romPage]:t>=40960&&t<49152&&this.ramEnabled&&(e=this.ram[t-40960])),e}},{key:"write",value:function(t,e){e<8192?this.ramEnabled=10==(15&t):e<16384?this.romPage=15&t:e>=40960&&e<49152&&this.ramEnabled&&(this.ram[e-40960]=t)}}]),u}();exports.MBC2=p;
},{"./cartridge":"WMXB"}],"LH6G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MBC3=void 0;var t=require("./cartridge");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=s();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?f(t):r}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(e){i(u,t.Cartridge);var n=c(u);function u(t){var e;return r(this,u),(e=n.call(this,t)).ramEnabled=!1,e.romPage=1,e.ramPage=0,e}return o(u,[{key:"read",value:function(t){var e=0;return t>=0&&(t<16384?e=this.rom[t]:t<32768?e=this.rom[t-16384+16384*this.romPage]:t>=40960&&t<49152&&this.ramEnabled&&(e=this.ram[t-40960+8192*this.ramPage])),e}},{key:"write",value:function(t,e){e<8192?this.ramEnabled=10==(15&t):e<16384?this.romPage=127&t:e<24576?this.ramPage=3&t:e>=40960&&e<49152&&this.ramEnabled&&(this.ram[e-40960+8192*this.ramPage]=t)}}]),u}();exports.MBC3=p;
},{"./cartridge":"WMXB"}],"jUyh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MBC4=void 0;var t=require("./cartridge");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=l();return function(){var r,n=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?a(t):r}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=function(e){u(c,t.Cartridge);var n=i(c);function c(t){return r(this,c),n.call(this,t)}return o(c,[{key:"read",value:function(t){return 0}},{key:"write",value:function(t,e){}}]),c}();exports.MBC4=s;
},{"./cartridge":"WMXB"}],"amVd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MBC5=void 0;var t=require("./cartridge");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=s();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?f(t):r}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(e){i(u,t.Cartridge);var n=c(u);function u(t){var e;return r(this,u),(e=n.call(this,t)).ramEnabled=!1,e.romPage=1,e.ramPage=0,e}return o(u,[{key:"read",value:function(t){var e=0;return t>=0&&(t<16384?e=this.rom[t]:t<32768?e=this.rom[t-16384+16384*this.romPage]:t>=40960&&t<49152&&this.ramEnabled&&(e=this.ram[t-40960+8192*this.ramPage])),e}},{key:"write",value:function(t,e){e<8192?this.ramEnabled=10==(15&t):e<12288?this.romPage=256&this.romPage|255&t:e<16384?this.romPage|=(1&t)<<8:e<24576?this.ramPage=15&t:e>=40960&&e<49152&&this.ramEnabled&&(this.ram[e-40960+8192*this.ramPage]=t)}}]),u}();exports.MBC5=p;
},{"./cartridge":"WMXB"}],"BLXM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"MBC0",{enumerable:!0,get:function(){return e.MBC0}}),Object.defineProperty(exports,"MBC1",{enumerable:!0,get:function(){return r.MBC1}}),Object.defineProperty(exports,"MBC2",{enumerable:!0,get:function(){return t.MBC2}}),Object.defineProperty(exports,"MBC3",{enumerable:!0,get:function(){return n.MBC3}}),Object.defineProperty(exports,"MBC4",{enumerable:!0,get:function(){return u.MBC4}}),Object.defineProperty(exports,"MBC5",{enumerable:!0,get:function(){return o.MBC5}});var e=require("./mbc0"),r=require("./mbc1"),t=require("./mbc2"),n=require("./mbc3"),u=require("./mbc4"),o=require("./mbc5");
},{"./mbc0":"mNV0","./mbc1":"oQlQ","./mbc2":"al9X","./mbc3":"LH6G","./mbc4":"jUyh","./mbc5":"amVd"}],"xO0K":[function(require,module,exports) {
"use strict";function _(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Constants=void 0;var E=function E(){_(this,E)};exports.Constants=E,E.JOYPAD=65280,E.SERIAL_DATA=65281,E.SERIAL_CTRL=65282,E.DIV_CNTR=65284,E.TIMER_COUNT=65285,E.TIMER_RELOAD=65286,E.TIMER_CRTL=65287,E.INT_FLAG=65295,E.SND_1_ENT=65296,E.SND_1_WAV_LEN=65297,E.SND_1_ENV=65298,E.SND_1_FREQ_KICK_LOWER=65299,E.SND_1_FREQ_KICK_UPPER=65300,E.SND_2_WAVE_LEN=65302,E.SND_2_ENV=65303,E.SND_2_FREQ_KICK_LOWER=65304,E.SND_2_FREQ_KICK_UPPER=65305,E.SND_3_ON_OFF=65306,E.SND_3_LEN=65307,E.SND_3_VOLUME=65308,E.SND_3_FREQ_KICK_LOWER=65309,E.SND_3_FREQ_KICK_UPPER=65310,E.SND_4_LEN=65312,E.SND_4_ENV=65313,E.SND_4_POLY_KICK_LOWER=65314,E.SND_4_POLY_KICK_UPPER=65315,E.SND_VOICE_INP=65316,E.SND_STEREO=65317,E.SND_STAT=65318,E.SND_BNK_10=65328,E.SND_BNK_11=65329,E.SND_BNK_12=65330,E.SND_BNK_13=65331,E.SND_BNK_14=65332,E.SND_BNK_15=65333,E.SND_BNK_16=65334,E.SND_BNK_17=65335,E.SND_BNK_20=65336,E.SND_BNK_21=65337,E.SND_BNK_22=65338,E.SND_BNK_23=65339,E.SND_BNK_24=65340,E.SND_BNK_25=65341,E.SND_BNK_26=65342,E.SND_BNK_27=65343,E.LCD_CTRL=65344,E.LCD_STAT=65345,E.LCD_SCROLL_Y=65346,E.LCD_SCROLL_X=65347,E.LCD_Y_LOC=65348,E.LCD_Y_COMP=65349,E.LCD_DMA=65350,E.LCD_BACK_PALETTE=65351,E.LCD_SPR0_PALETTE=65352,E.LCD_SPR1_PALETTE=65353,E.LCD_WIN_Y=65354,E.LCD_WIN_X=65355,E.CPU_SPEED_REG=65357,E.VRAM_BANK=65359,E.DMA_SRC_UPPER=65361,E.DMA_SRC_LOWER=65362,E.DMA_DST_UPPER=65363,E.DMA_DST_LOWER=65364,E.DMA_LEN_TYPE=65365,E.IR_PORT=65366,E.BGP_INDEX=65384,E.BGP_DATA=65385,E.OBP_INDEX=65386,E.OBP_DATA=65387,E.RAM_BANK=65392,E.INT_ENABLE=65535,E.INSTR_HBLANK=60,E.INSTR_VBLANK=9e4,E.INSTR_TIMA=6e3,E.INSTR_DIV=33,E.CYCLES_DIV=256,E.CYCLES_TIMER_MODE0=1024,E.CYCLES_TIMER_MODE1=16,E.CYCLES_TIMER_MODE2=64,E.CYCLES_TIMER_MODE3=256,E.CYCLES_LCD_MODE0=375,E.CYCLES_LCD_MODE1=456,E.CYCLES_LCD_MODE2=82,E.CYCLES_LCD_MODE3=172,E.INT_VBLANK=1,E.INT_LCDC=2,E.INT_TIMER=4,E.INT_SERIALTX=8,E.INT_KEY=16,E.KEY_DOWN=0,E.KEY_UP=1,E.KEY_LEFT=2,E.KEY_RIGHT=3,E.KEY_START=4,E.KEY_SELECT=5,E.KEY_B=6,E.KEY_A=7,E.CPU_SPEED=4.194304,E.MEMSIZE=65536,E.DMG_COLORS=[10206223,9153551,3170864,997391],E.DMG_COLORS_BW=[15132390,10526880,5263440,1315860],E.SCREEN_WIDTH=160,E.SCREEN_HEIGHT=144;
},{}],"w7UQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GPU=void 0;var t=require("../util/constants");function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function s(t,e,s){return e&&r(t.prototype,e),s&&r(t,s),t}var n=function(){function r(s,n){e(this,r),this.memory=s,this.screen=n,this.buffers=[new Uint8Array(t.Constants.SCREEN_WIDTH*t.Constants.SCREEN_HEIGHT),new Uint8Array(t.Constants.SCREEN_WIDTH*t.Constants.SCREEN_HEIGHT)],this.currentBuffer=0}return s(r,[{key:"hblank",value:function(){var e=255&this.memory.read(t.Constants.LCD_Y_LOC);this.updateBackground(e),this.updateWindow(e),this.updateSprites(e)}},{key:"updateBackground",value:function(e){if(0!=(1&this.memory.read(t.Constants.LCD_CTRL))&&e<144)for(var r=0!=(8&this.memory.read(t.Constants.LCD_CTRL))?39936:38912,s=0!=(16&this.memory.read(t.Constants.LCD_CTRL))?32768:34816,n=this.memory.read(t.Constants.LCD_SCROLL_X),a=this.memory.read(t.Constants.LCD_SCROLL_Y),i=0;i<160;i++){a+e>255&&(a-=255),n+i>255&&(n-=255);var o=n+i>>3,C=a+e>>3,u=n+i&7,h=a+e&7,m=this.getIdTile(o,C,r,s),d=this.getTile(m,s,u,h);this.drawPixel(i,e,this.id2color(d,t.Constants.LCD_BACK_PALETTE))}}},{key:"updateWindow",value:function(e){var r=this.memory.read(t.Constants.LCD_WIN_Y);if(0!=(32&this.memory.read(t.Constants.LCD_CTRL))&&r<=e)for(var s=this.memory.read(t.Constants.LCD_WIN_X)-7,n=0!=(64&this.memory.read(t.Constants.LCD_CTRL))?39936:38912,a=0!=(16&this.memory.read(t.Constants.LCD_CTRL))?32768:34816,i=0;i<160-s;i++){var o=i>>3,C=e-r>>3,u=7&i,h=e-r&7,m=this.getIdTile(o,C,n,a),d=this.getTile(m,a,u,h);i+s<160&&i+s>=0&&this.drawPixel(i+s,e,this.id2color(d,t.Constants.LCD_BACK_PALETTE))}}},{key:"updateSprites",value:function(e){if(0!=(2&this.memory.read(t.Constants.LCD_CTRL)))for(var r=0!=(4&this.memory.read(t.Constants.LCD_CTRL))?16:8,s=39;s>=0;s--){var n=this.memory.read(65024+4*s),a=this.memory.read(65025+4*s);if(n<=e+16&&n>e+(16-r))for(var i=this.memory.read(65026+4*s),o=this.memory.read(65027+4*s),C=16==(16&o),u=32==(32&o),h=64==(64&o),m=128==(128&o),d=0;d<8;d++){var f=u?a-1-d:a+d-8,L=h?r-(e-n+17):e-n+16,l=this.getTile(i,32768,d,L);f>=0&&0!=l&&(!m||m&&0==this.getIdColor(f,e))&&this.drawPixel(f,e,this.id2color(l,C?t.Constants.LCD_SPR1_PALETTE:t.Constants.LCD_SPR0_PALETTE))}}}},{key:"vblank",value:function(){this.screen.refresh(this.buffers[this.currentBuffer]),this.currentBuffer=1&~this.currentBuffer}},{key:"drawPixel",value:function(e,r,s){this.buffers[this.currentBuffer][r*t.Constants.SCREEN_WIDTH+e]=s}},{key:"getIdColor",value:function(e,r){var s=0!=(8&this.memory.read(t.Constants.LCD_CTRL))?39936:38912,n=0!=(16&this.memory.read(t.Constants.LCD_CTRL))?32768:34816,a=this.memory.read(t.Constants.LCD_SCROLL_X),i=this.memory.read(t.Constants.LCD_SCROLL_Y);i+r>255&&(i-=255),a+e>255&&(a-=255);var o=this.getIdTile(a+e>>3,i+r>>3,s,n);return this.getTile(o,n,a+e&7,i+r&7)}},{key:"id2color",value:function(t,e){return(this.memory.read(e)&3<<2*t)>>2*t}},{key:"getIdTile",value:function(t,e,r,s){var n=this.memory.read(r+(e<<5)+t);return 32768!=s&&(n^=128),n}},{key:"getTile",value:function(t,e,r,s){return(this.memory.read(e+1+(s<<1)+(t<<4))>>7-r&1)<<1|this.memory.read(e+(s<<1)+(t<<4))>>7-r&1}}]),r}();exports.GPU=n;
},{"../util/constants":"xO0K"}],"jk5o":[function(require,module,exports) {
"use strict";function t(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function s(t,s){for(var e=0;e<s.length;e++){var i=s[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Registers=void 0;var i=function(){function s(){t(this,s),this.registers={A:0,B:0,C:0,D:0,E:0,SP:0,PC:0,HL:0},this.flags={Z:!1,H:!1,N:!1,C:!1}}return e(s,[{key:"A",get:function(){return this.registers.A},set:function(t){this.registers.A=t}},{key:"B",get:function(){return this.registers.B},set:function(t){this.registers.B=t}},{key:"C",get:function(){return this.registers.C},set:function(t){this.registers.C=t}},{key:"D",get:function(){return this.registers.D},set:function(t){this.registers.D=t}},{key:"E",get:function(){return this.registers.E},set:function(t){this.registers.E=t}},{key:"flagIME",get:function(){return this.IME},set:function(t){this.IME=t}},{key:"SP",get:function(){return this.registers.SP},set:function(t){this.registers.SP=t}},{key:"PC",get:function(){return this.registers.PC},set:function(t){this.registers.PC=t}},{key:"HL",get:function(){return this.registers.HL},set:function(t){this.registers.HL=t}},{key:"H",get:function(){return(65280&this.registers.HL)>>8},set:function(t){this.registers.HL=255&this.registers.HL|t<<8}},{key:"L",get:function(){return 255&this.registers.HL},set:function(t){this.registers.HL=65280&this.registers.HL|t}},{key:"BC",get:function(){return this.registers.B<<8|this.registers.C},set:function(t){this.registers.B=(65280&t)>>8,this.registers.C=255&t}},{key:"DE",get:function(){return this.registers.D<<8|this.registers.E},set:function(t){this.registers.D=(65280&t)>>8,this.registers.E=255&t}},{key:"AF",get:function(){return this.registers.A<<8|this.getFlags()},set:function(t){this.registers.A=(65280&t)>>8,this.setFlags(255&t)}},{key:"F",get:function(){return this.getFlags()},set:function(t){this.setFlags(t)}},{key:"flagZ",get:function(){return this.flags.Z},set:function(t){this.flags.Z=t}},{key:"flagN",get:function(){return this.flags.N},set:function(t){this.flags.N=t}},{key:"flagH",get:function(){return this.flags.H},set:function(t){this.flags.H=t}},{key:"flagC",get:function(){return this.flags.C},set:function(t){this.flags.C=t}},{key:"getFlag",value:function(t){var s=!1;switch(t){case"Z":s=this.flags.Z;break;case"N":s=this.flags.N;break;case"H":s=this.flags.H;break;case"C":s=this.flags.C}return s}},{key:"setFlag",value:function(t,s){switch(t){case"Z":this.flags.Z=s;break;case"N":this.flags.N=s;break;case"H":this.flags.H=s;break;case"C":this.flags.C=s}}},{key:"getFlags",value:function(){var t=0;return 1==this.flags.Z&&(t|=128),1==this.flags.H&&(t|=32),1==this.flags.N&&(t|=64),1==this.flags.C&&(t|=16),255&t}},{key:"setFlags",value:function(t){this.flags.Z=0!=(128&t),this.flags.H=0!=(32&t),this.flags.N=0!=(64&t),this.flags.C=0!=(16&t)}},{key:"getReg",value:function(t){var s=-1;switch(t){case"A":s=this.A;break;case"B":s=this.B;break;case"C":s=this.C;break;case"D":s=this.D;break;case"E":s=this.E;break;case"SP":s=this.SP;break;case"PC":s=this.PC;break;case"HL":s=this.HL;break;case"BC":s=this.BC;break;case"DE":s=this.DE;break;case"H":s=this.H;break;case"L":s=this.L;break;case"AF":s=this.AF;break;case"F":s=this.F}return s}},{key:"setReg",value:function(t,s){switch(t){case"A":this.A=s;break;case"B":this.B=s;break;case"C":this.C=s;break;case"D":this.D=s;break;case"E":this.E=s;break;case"SP":this.SP=s;break;case"PC":this.PC=s;break;case"HL":this.HL=s;break;case"BC":this.BC=s;break;case"DE":this.DE=s;break;case"H":this.H=s;break;case"L":this.L=s;break;case"AF":this.AF=s;break;case"F":this.F=s}}},{key:"reset",value:function(){this.flagIME=!1,this.flagZ=!0,this.flagN=!1,this.flagH=!0,this.flagC=!0,this.A=17,this.PC=256,this.SP=65534,this.BC=19,this.DE=216,this.HL=333}}]),s}();exports.Registers=i;
},{}],"JOih":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OPCODES_CB=exports.OPCODES=void 0;var n=require("../util/constants"),r={NOP:function(n){return n.PC+=1,4},LD:{LD_DD_NN:function(n,r,t){return n.setReg(t,r.readWord(n.PC)),n.PC+=3,10},LD_R_R:function(n,r,t){return n.setReg(r,n.getReg(t)),n.PC+=1,4},LD_R_N:function(n,r,t){return n.setReg(t,r.read(n.PC+1)),n.PC+=2,7},LD_ADR_R:function(n,r,t){return r.write(n.getReg(t),r.readWord(n.PC)),n.PC+=3,13},LD_ADR_RR:function(n,r,t){var u=n.getReg(t),R=r.readWord(n.PC);return r.write(255&u,R),r.write(u>>8&255,R+1),n.PC+=3,13},LDD_RADR_R:function(n,r,t,u){var R=n.getReg(t);return r.write(n.getReg(u),R),R=0==R?65535:R-1,n.setReg(t,R),n.PC+=1,15},LDI_RADR_R:function(n,r,t,u){var R=n.getReg(t);return r.write(n.getReg(u),R),R=0==R?65535:R+1,n.setReg(t,R),n.PC+=1,15},LDD_R_RADR:function(n,r,t,u){var R=n.getReg(u),e=r.read(R);return n.setReg(t,e),R=0==R?65535:R-1,n.setReg(u,R),n.PC+=1,15},LDI_R_RADR:function(n,r,t,u){var R=n.getReg(u),e=r.read(R);return n.setReg(t,e),R=0==R?65535:R+1,n.setReg(u,R),n.PC+=1,15},LD_R_DADR:function(n,r,t){return n.setReg(t,r.read(65280+r.read(n.PC+1))),n.PC+=2,15},LD_R_DR:function(n,r,t,u){return n.setReg(t,r.read(65280+n.getReg(u))),n.PC+=1,15},LD_DADR_R:function(n,r,t){return r.write(n.getReg(t),65280+r.read(n.PC+1)),n.PC+=2,15},LD_DR_R:function(n,r,t,u){return r.write(n.getReg(u),65280+n.getReg(t)),n.PC+=1,15},LD_RADR_R:function(n,r,t,u){return r.write(n.getReg(u),n.getReg(t)),n.PC+=1,7},LD_R_ADR:function(n,r,t){return n.setReg(t,r.read(r.readWord(n.PC))),n.PC+=3,13},LD_R_RADR:function(n,r,t,u){return n.setReg(t,r.read(n.getReg(u))),n.PC+=1,7},LD_RADR_N:function(n,r,t){return r.write(r.read(n.PC+1),n.getReg(t)),n.PC+=2,10},LD_R_SPD:function(n,r,t){var u=r.read(n.PC+1);return u>127&&(u-=256),n.setReg(t,n.SP+u),n.setFlags(0),n.flagC=n.getReg(t)>65535,n.PC+=2,10}},INT:{DI:function(n){return n.flagIME=!1,n.PC+=1,4},EI:function(n){return n.flagIME=!0,n.PC+=1,4},HALT:function(r,t){return r.flagIME&&(t.read(n.Constants.INT_FLAG)&t.read(n.Constants.INT_ENABLE))>0&&(r.PC+=1),4},STOP:function(n){return n.PC+=2,4}},BIT:{BIT_R:function(n,r,t){return n.flagZ=0==(r&n.getReg(t)),n.flagH=!0,n.flagN=!1,n.PC+=1,8},BIT_RADR:function(n,r,t,u){return n.flagZ=0==(t&r.read(n.getReg(u))),n.flagH=!0,n.flagN=!1,n.PC+=1,10},SET_R:function(n,r,t){return n.setReg(t,n.getReg(t)|r),n.PC+=1,8},SET_RADR:function(n,r,t,u){var R=n.getReg(u);return r.write(r.read(R)|t,R),n.PC+=1,8},RES_R:function(n,r,t){return n.setReg(t,n.getReg(t)&~r),n.PC+=1,8},RES_RADR:function(n,r,t,u){var R=n.getReg(u);return r.write(r.read(R)&~t,R),n.PC+=1,11},SWAP_R:function(n,r){var t=n.getReg(r);return t=(15&t)<<4|(240&t)>>4,n.setReg(r,t),n.setFlags(0),n.flagZ=0==t,n.PC+=1,8},SWAP_RADR:function(n,r,t){var u=n.getReg(t),R=r.read(u);return R=(15&R)<<4|(240&R)>>4,r.write(R,u),n.setFlags(0),n.flagZ=0==R,n.PC+=1,16}},COMP:{CCF:function(n){return n.flagN=!1,n.flagH=!1,n.flagC=!n.flagC,n.PC+=1,4},CPL:function(n){return n.flagN=!0,n.flagH=!0,n.A^=255,n.A&=255,n.PC+=1,4},SCF:function(n){return n.flagH=!1,n.flagN=!1,n.flagC=!0,n.PC+=1,4}},LOGIC:{XOR_R:function(n,r){return n.A^=n.getReg(r),n.A&=255,n.setFlags(0),n.flagZ=0==n.A,n.PC+=1,4},XOR_RADR:function(n,r,t){return n.A^=r.read(n.getReg(t)),n.A&=255,n.setFlags(0),n.flagZ=0==n.A,n.PC+=1,7},XOR_N:function(n,r){return n.A^=r.read(n.PC+1),n.A&=255,n.setFlags(0),n.flagZ=0==n.A,n.PC+=2,7},OR_R_R:function(n,r){return n.A|=n.getReg(r),n.setFlags(0),n.flagZ=0==n.A,n.PC+=1,4},AND_R_R:function(n,r){return n.A&=n.getReg(r),n.flagH=!0,n.flagN=!1,n.flagC=!1,n.flagZ=0==n.A,n.PC+=1,4},AND_R_N:function(n,r){return n.A&=r.read(n.PC+1),n.flagH=!0,n.flagN=!1,n.flagC=!1,n.flagZ=0==n.A,n.PC+=2,7},AND_RADR:function(n,r,t){return n.A&=r.read(n.getReg(t)),n.flagH=!0,n.flagN=!1,n.flagC=!1,n.flagZ=0==n.A,n.PC+=1,7},OR_R_ADR:function(n,r,t){return n.A|=r.read(n.getReg(t)),n.setFlags(0),n.flagZ=0==n.A,n.PC+=1,7},OR_N:function(n,r){return n.A|=r.read(n.PC+1),n.setFlags(0),n.flagZ=0==n.A,n.PC+=2,7}},SHIFT:{RLC:function(n,r,t){var u=n.getReg(r),R=(128&u)>>7;return n.flagC=0!=(128&u),t&&(n.flagZ=0==(255&u)),n.flagN=!1,n.flagH=!1,n.setReg(r,255&(u<<1|R)),n.PC+=1,4},RLC_RADR:function(n,r,t){var u=n.getReg(t),R=r.read(u),e=(128&R)>>7;return n.flagC=0!=(128&R),n.flagZ=0==(255&R),n.flagN=!1,n.flagH=!1,r.write(255&(R<<1|e),u),n.PC+=1,15},SLA:function(n,r){var t=n.getReg(r)<<1;return n.flagC=t>255,n.flagZ=0==(255&t),n.flagN=!1,n.flagH=!1,n.setReg(r,255&t),n.PC+=1,8},SLA_RADR:function(n,r,t){var u=n.getReg(t),R=r.read(u)<<1;return n.flagC=R>255,n.flagZ=0==(255&R),n.flagN=!1,n.flagH=!1,r.write(255&R,u),n.PC+=1,15},SRA:function(n,r){var t=n.getReg(r),u=255&(t>>1|128&t);return n.flagC=1==(1&t),n.flagZ=0==u,n.flagN=!1,n.flagH=!1,n.setReg(r,u),n.PC+=1,8},SRA_RADR:function(n,r,t){var u=n.getReg(t),R=r.read(u),e=255&(R>>1|128&R);return n.flagC=1==(1&R),n.flagZ=0==e,n.flagN=!1,n.flagH=!1,r.write(e,u),n.PC+=1,15},SRL:function(n,r){var t=n.getReg(r),u=t>>1&255;return n.flagC=1==(1&t),n.flagZ=0==u,n.flagN=!1,n.flagH=!1,n.setReg(r,u),n.PC+=1,8},SRL_RADR:function(n,r,t){var u=n.getReg(t),R=r.read(u),e=R>>1&255;return n.flagC=1==(1&R),n.flagZ=0==e,n.flagN=!1,n.flagH=!1,r.write(e,u),n.PC+=1,15},RL:function(n,r,t){var u=n.getReg(r)<<1|(n.flagC?1:0);return t&&(n.flagZ=0==(255&u)),n.flagC=u>255,n.flagN=!1,n.flagH=!1,n.setReg(r,255&u),n.PC+=1,8},RL_RADR:function(n,r,t){var u=n.getReg(t),R=r.read(u)<<1|(n.flagC?1:0);return n.flagZ=0==(255&R),n.flagC=R>255,n.flagN=!1,n.flagH=!1,r.write(255&R,u),n.PC+=1,15},RRC:function(n,r,t){var u=n.getReg(r),R=u>>1|(1&u)<<7;return t&&(n.flagZ=0==(255&R)),n.flagC=1==(1&u),n.flagH=!1,n.flagN=!1,n.setReg(r,255&R),n.PC+=1,4},RRC_RADR:function(n,r,t){var u=n.getReg(t),R=r.read(u),e=R>>1|(1&R)<<7;return n.flagC=1==(1&R),n.flagZ=0==e,n.flagN=!1,n.flagH=!1,r.write(255&e,u),n.PC+=1,15},RR:function(n,r,t){var u=n.getReg(r),R=u>>1|(n.flagC?1:0)<<7;return t&&(n.flagZ=0==R),n.flagC=1==(1&u),n.flagH=!1,n.flagN=!1,n.setReg(r,255&R),n.PC+=1,4},RR_RADR:function(n,r,t){var u=n.getReg(t),R=r.read(u),e=R>>1|(n.flagC?1:0)<<7;return n.flagC=1==(1&R),n.flagZ=0==e,n.flagN=!1,n.flagH=!1,r.write(255&e,u),n.PC+=1,15}},JUMP:{JP_ADR:function(n,r){return n.PC=r.readWord(n.PC),10},JP_RADR:function(n,r){return n.PC=n.getReg(r),4},JP_CC0_ADR:function(n,r,t){var u=r.readWord(n.PC);return n.PC+=3,n.getFlag(t)||(n.PC=u),10},JP_CC1_ADR:function(n,r,t){var u=r.readWord(n.PC);return n.PC+=3,n.getFlag(t)&&(n.PC=u),10},JR_N:function(n,r){var t=r.read(n.PC+1);return t>127&&(t-=256),n.PC+=2,n.PC+=t,12},JR_CC0_N:function(n,r,t){var u=r.read(n.PC+1);return u>127&&(u-=256),n.PC+=2,n.getFlag(t)?7:(n.PC+=u,12)},JR_CC1_N:function(n,r,t){var u=r.read(n.PC+1);return u>127&&(u-=256),n.PC+=2,n.getFlag(t)?(n.PC+=u,12):7},CALL_ADR:function(n,r){var t=r.readWord(n.PC);return n.PC+=3,n.SP--,r.write((65280&n.PC)>>8,n.SP),n.SP--,r.write(255&n.PC,n.SP),n.PC=t,17},CALL_CC0_ADR:function(n,r,t){var u=r.readWord(n.PC);return n.PC+=3,n.getFlag(t)?10:(n.SP--,r.write((65280&n.PC)>>8,n.SP),n.SP--,r.write(255&n.PC,n.SP),n.PC=u,17)},CALL_CC1_ADR:function(n,r,t){var u=r.readWord(n.PC);return n.PC+=3,n.getFlag(t)?(n.SP--,r.write((65280&n.PC)>>8,n.SP),n.SP--,r.write(255&n.PC,n.SP),n.PC=u,17):10},PUSH_RR:function(n,r,t){var u=n.getReg(t);return n.SP--,r.write((65280&u)>>8,n.SP),n.SP--,r.write(255&u,n.SP),n.PC+=1,11},POP_RR:function(n,r,t){var u=r.read(n.SP);n.SP++;var R=r.read(n.SP);return n.SP++,n.setReg(t,R<<8|u),n.PC+=1,11},RET_CC0_ADR:function(n,r,t){if(n.PC+=1,!n.getFlag(t)){var u=r.read(n.SP);n.SP++;var R=r.read(n.SP);return n.SP++,n.PC=R<<8|u,11}return 5},RET_CC1_ADR:function(n,r,t){if(n.PC+=1,n.getFlag(t)){var u=r.read(n.SP);n.SP++;var R=r.read(n.SP);return n.SP++,n.PC=R<<8|u,11}return 5},RET_ADR:function(n,r){n.PC+=1;var t=r.read(n.SP);n.SP++;var u=r.read(n.SP);return n.SP++,n.PC=u<<8|t,10},RETI:function(n,r){n.PC+=1;var t=r.read(n.SP);n.SP++;var u=r.read(n.SP);return n.SP++,n.PC=u<<8|t,n.flagIME=!0,10},RST:function(n,r,t){return n.PC+=1,n.SP--,r.write((65280&n.PC)>>8,n.SP),n.SP--,r.write(255&n.PC,n.SP),n.PC=t,11}},ADD:{DEC_R:function(n,r){var t=n.getReg(r),u=t-1&255;return n.flagZ=0===u,n.flagH=1==((15&t)-1>>4&1),n.flagN=!0,n.setReg(r,u),n.PC+=1,4},DEC_RADR:function(n,r,t){var u=n.getReg(t),R=r.read(u),e=R-1&255;return n.flagZ=0===e,n.flagH=1==((15&R)-1>>4&1),n.flagN=!0,r.write(e,u),n.PC+=1,11},INC_R:function(n,r){var t=n.getReg(r),u=t+1&255;return n.flagZ=0===u,n.flagH=1+(15&t)>>4==0,n.flagN=!1,n.setReg(r,u),n.PC+=1,4},INC_RADR:function(n,r,t){var u=n.getReg(t),R=r.read(u),e=R+1&255;return n.flagZ=0===e,n.flagH=1+(15&R)>>4==0,n.flagN=!1,r.write(e,u),n.PC+=1,11},DEC_RR:function(n,r){return n.setReg(r,n.getReg(r)-1&65535),n.PC+=1,6},INC_RR:function(n,r){return n.setReg(r,n.getReg(r)+1&65535),n.PC+=1,6},ADD_R_R:function(n,r,t){var u=n.getReg(t),R=n.getReg(r),e=u+R;return n.flagZ=0==(255&e),n.flagH=(15&R)+(15&u)>15,n.flagC=e>255,n.flagN=!1,n.setReg(r,255&e),n.PC+=1,4},ADD_R_RADR:function(n,r,t,u){var R=r.read(n.getReg(u)),e=n.getReg(t),f=R+e;return n.flagZ=0==(255&f),n.flagH=(15&e)+(15&R)>15,n.flagC=f>255,n.flagN=!1,n.setReg(t,255&f),n.PC+=1,7},ADD_RR_RR:function(n,r,t){var u=n.getReg(t),R=n.getReg(r),e=u+R;return n.flagH=(4095&R)+(4095&u)>4095,n.flagC=e>65535,n.flagN=!1,n.setReg(r,65535&e),n.PC+=1,11},ADD_R_NN:function(n,r,t){var u=r.read(n.PC+1);u>127&&(u-=256);var R=n.getReg(t)+u;return n.setFlags(0),n.flagC=R>65535,n.setReg(t,65535&R),n.PC+=2,7},ADD_R_N:function(n,r,t){var u=r.read(n.PC+1),R=n.getReg(t)+u;return n.flagZ=0==(255&R),n.flagC=R>65535,n.flagH=(15&R)+(15&u)>15,n.flagN=!1,n.setReg(t,255&R),n.PC+=2,7},CP_R:function(n,r){var t=n.getReg(r);return n.flagZ=n.A==t,n.flagC=n.A<t,n.flagH=(15&n.A)<(15&t),n.flagN=!0,n.PC+=1,4},CP_RADR:function(n,r,t){var u=r.read(n.getReg(t));return n.flagZ=n.A==u,n.flagC=n.A<u,n.flagH=(15&n.A)<(15&u),n.flagN=!0,n.PC+=1,7},CP_N:function(n,r){var t=r.read(n.PC+1);return n.flagZ=n.A==t,n.flagC=n.A<t,n.flagH=(15&n.A)<(15&t),n.flagN=!0,n.PC+=2,7},SBC_R_R:function(n,r,t){var u=n.getReg(t),R=n.getReg(r),e=R-u-(n.flagC?1:0);return n.flagZ=0==(255&e),n.flagH=(15&R)<(u-(n.flagC?1:0)&15),n.flagC=e<0,n.flagN=!0,n.setReg(r,255&e),n.PC+=1,4},SUB_R_R:function(n,r,t){var u=n.getReg(t),R=n.getReg(r),e=R-u;return n.flagZ=0==(255&e),n.flagH=(15&R)<(15&u),n.flagC=e<0,n.flagN=!0,n.setReg(r,255&e),n.PC+=1,4},SUB_R_RADR:function(n,r,t,u){var R=r.read(n.getReg(u)),e=n.getReg(t),f=e-R;return n.flagZ=0==(255&f),n.flagH=(15&e)<(15&R),n.flagC=f<0,n.flagN=!0,n.setReg(t,255&f),n.PC+=1,4},SBC_R_N:function(n,r,t){var u=r.read(n.PC+1),R=n.getReg(t),e=R-u-(n.flagC?1:0);return n.flagZ=0==(255&e),n.flagH=(15&R)<(u-(n.flagC?1:0)&15),n.flagC=e<0,n.flagN=!0,n.setReg(t,255&e),n.PC+=2,4},ADC_R_R:function(n,r,t){var u=n.getReg(t),R=n.getReg(r),e=R+u+(n.flagC?1:0);return n.flagZ=0==(255&e),n.flagH=(15&R)+(15&u)+(n.flagC?1:0)>15,n.flagC=e<0,n.flagN=!1,n.setReg(r,255&e),n.PC+=1,4},ADC_R_RADR:function(n,r,t,u){var R=r.read(n.getReg(u)),e=n.getReg(t),f=e+R+(n.flagC?1:0);return n.flagZ=0==(255&f),n.flagH=(15&e)+(15&R)+(n.flagC?1:0)>15,n.flagC=f>255,n.flagN=!1,n.setReg(t,255&f),n.PC+=1,4},ADC_R_N:function(n,r,t){var u=r.read(n.PC+1),R=n.getReg(t),e=R+u+(n.flagC?1:0);return n.flagZ=0==(255&e),n.flagH=(15&R)+(15&u)+(n.flagC?1:0)>15,n.flagC=e<0,n.flagN=!1,n.setReg(t,255&e),n.PC+=2,4},SUB_R_N:function(n,r,t){var u=r.read(n.PC+1),R=n.getReg(t),e=R-u;return n.flagZ=0==(255&e),n.flagH=(15&R)<(15&u),n.flagC=e<0,n.flagN=!0,n.setReg(t,255&e),n.PC+=2,4},SBC_R_RADR:function(n,r,t,u){var R=r.read(n.getReg(u)),e=n.getReg(t),f=e-R-(n.flagC?1:0);return n.flagZ=0==(255&f),n.flagH=(15&e)<(R-(n.flagC?1:0)&15),n.flagC=f<0,n.flagN=!0,n.setReg(t,255&f),n.PC+=1,4},DAA:function(n){var r=n.A,t=0;return n.flagH&&(t|=6),n.flagC&&(t|=96),n.flagN?((15&r)>9&&(t|=6),r>153&&(t|=96),r+=t):r-=t,n.flagZ=0==(255&r),n.flagC=0!=(96&t),n.flagH=!1,n.A=255&r,n.PC+=1,4}}},t={0:function(n,t){return r.NOP(n)},1:function(n,t){return r.LD.LD_DD_NN(n,t,"BC")},2:function(n,t){return r.LD.LD_RADR_R(n,t,"BC","A")},3:function(n,t){return r.ADD.INC_RR(n,"BC")},4:function(n,t){return r.ADD.INC_R(n,"B")},5:function(n,t){return r.ADD.DEC_R(n,"B")},6:function(n,t){return r.LD.LD_R_N(n,t,"B")},7:function(n,t){return r.SHIFT.RLC(n,"A",!1)},8:function(n,t){return r.LD.LD_ADR_RR(n,t,"SP")},9:function(n,t){return r.ADD.ADD_RR_RR(n,"HL","BC")},10:function(n,t){return r.LD.LD_R_RADR(n,t,"A","BC")},11:function(n,t){return r.ADD.DEC_RR(n,"BC")},12:function(n,t){return r.ADD.INC_R(n,"C")},13:function(n,t){return r.ADD.DEC_R(n,"C")},14:function(n,t){return r.LD.LD_R_N(n,t,"C")},15:function(n,t){return r.SHIFT.RRC(n,"A",!1)},16:function(n,t){return r.INT.STOP(n)},17:function(n,t){return r.LD.LD_DD_NN(n,t,"DE")},18:function(n,t){return r.LD.LD_RADR_R(n,t,"DE","A")},19:function(n,t){return r.ADD.INC_RR(n,"DE")},20:function(n,t){return r.ADD.INC_R(n,"D")},21:function(n,t){return r.ADD.DEC_R(n,"D")},22:function(n,t){return r.LD.LD_R_N(n,t,"D")},23:function(n,t){return r.SHIFT.RL(n,"A",!1)},24:function(n,t){return r.JUMP.JR_N(n,t)},25:function(n,t){return r.ADD.ADD_RR_RR(n,"HL","DE")},26:function(n,t){return r.LD.LD_R_RADR(n,t,"A","DE")},27:function(n,t){return r.ADD.DEC_RR(n,"DE")},28:function(n,t){return r.ADD.INC_R(n,"E")},29:function(n,t){return r.ADD.DEC_R(n,"E")},30:function(n,t){return r.LD.LD_R_N(n,t,"E")},31:function(n,t){return r.SHIFT.RR(n,"A",!1)},32:function(n,t){return r.JUMP.JR_CC0_N(n,t,"Z")},33:function(n,t){return r.LD.LD_DD_NN(n,t,"HL")},34:function(n,t){return r.LD.LDI_RADR_R(n,t,"HL","A")},35:function(n,t){return r.ADD.INC_RR(n,"HL")},36:function(n,t){return r.ADD.INC_R(n,"H")},37:function(n,t){return r.ADD.DEC_R(n,"H")},38:function(n,t){return r.LD.LD_R_N(n,t,"H")},39:function(n,t){return r.ADD.DAA(n)},40:function(n,t){return r.JUMP.JR_CC1_N(n,t,"Z")},41:function(n,t){return r.ADD.ADD_RR_RR(n,"HL","HL")},42:function(n,t){return r.LD.LDI_R_RADR(n,t,"A","HL")},43:function(n,t){return r.ADD.DEC_RR(n,"HL")},44:function(n,t){return r.ADD.INC_R(n,"L")},45:function(n,t){return r.ADD.DEC_R(n,"L")},46:function(n,t){return r.LD.LD_R_N(n,t,"L")},47:function(n,t){return r.COMP.CPL(n)},48:function(n,t){return r.JUMP.JR_CC0_N(n,t,"C")},49:function(n,t){return r.LD.LD_DD_NN(n,t,"SP")},50:function(n,t){return r.LD.LDD_RADR_R(n,t,"HL","A")},51:function(n,t){return r.ADD.INC_RR(n,"SP")},52:function(n,t){return r.ADD.INC_RADR(n,t,"HL")},53:function(n,t){return r.ADD.DEC_RADR(n,t,"HL")},54:function(n,t){return r.LD.LD_RADR_N(n,t,"HL")},55:function(n,t){return r.COMP.SCF(n)},56:function(n,t){return r.JUMP.JR_CC1_N(n,t,"C")},57:function(n,t){return r.ADD.ADD_RR_RR(n,"HL","SP")},58:function(n,t){return r.LD.LDD_R_RADR(n,t,"A","HL")},59:function(n,t){return r.ADD.DEC_RR(n,"SP")},60:function(n,t){return r.ADD.INC_R(n,"A")},61:function(n,t){return r.ADD.DEC_R(n,"A")},62:function(n,t){return r.LD.LD_R_N(n,t,"A")},63:function(n,t){return r.COMP.CCF(n)},64:function(n,t){return r.LD.LD_R_R(n,"B","B")},65:function(n,t){return r.LD.LD_R_R(n,"B","C")},66:function(n,t){return r.LD.LD_R_R(n,"B","D")},67:function(n,t){return r.LD.LD_R_R(n,"B","E")},68:function(n,t){return r.LD.LD_R_R(n,"B","H")},69:function(n,t){return r.LD.LD_R_R(n,"B","L")},70:function(n,t){return r.LD.LD_R_RADR(n,t,"B","HL")},71:function(n,t){return r.LD.LD_R_R(n,"B","A")},72:function(n,t){return r.LD.LD_R_R(n,"C","B")},73:function(n,t){return r.LD.LD_R_R(n,"C","C")},74:function(n,t){return r.LD.LD_R_R(n,"C","D")},75:function(n,t){return r.LD.LD_R_R(n,"C","E")},76:function(n,t){return r.LD.LD_R_R(n,"C","H")},77:function(n,t){return r.LD.LD_R_R(n,"C","L")},78:function(n,t){return r.LD.LD_R_RADR(n,t,"C","HL")},79:function(n,t){return r.LD.LD_R_R(n,"C","A")},80:function(n,t){return r.LD.LD_R_R(n,"D","B")},81:function(n,t){return r.LD.LD_R_R(n,"D","C")},82:function(n,t){return r.LD.LD_R_R(n,"D","D")},83:function(n,t){return r.LD.LD_R_R(n,"D","E")},84:function(n,t){return r.LD.LD_R_R(n,"D","H")},85:function(n,t){return r.LD.LD_R_R(n,"D","L")},86:function(n,t){return r.LD.LD_R_RADR(n,t,"D","HL")},87:function(n,t){return r.LD.LD_R_R(n,"D","A")},88:function(n,t){return r.LD.LD_R_R(n,"E","B")},89:function(n,t){return r.LD.LD_R_R(n,"E","C")},90:function(n,t){return r.LD.LD_R_R(n,"E","D")},91:function(n,t){return r.LD.LD_R_R(n,"E","E")},92:function(n,t){return r.LD.LD_R_R(n,"E","H")},93:function(n,t){return r.LD.LD_R_R(n,"E","L")},94:function(n,t){return r.LD.LD_R_RADR(n,t,"E","HL")},95:function(n,t){return r.LD.LD_R_R(n,"E","A")},96:function(n,t){return r.LD.LD_R_R(n,"H","B")},97:function(n,t){return r.LD.LD_R_R(n,"H","C")},98:function(n,t){return r.LD.LD_R_R(n,"H","D")},99:function(n,t){return r.LD.LD_R_R(n,"H","E")},100:function(n,t){return r.LD.LD_R_R(n,"H","H")},101:function(n,t){return r.LD.LD_R_R(n,"H","L")},102:function(n,t){return r.LD.LD_R_RADR(n,t,"H","HL")},103:function(n,t){return r.LD.LD_R_R(n,"H","A")},104:function(n,t){return r.LD.LD_R_R(n,"L","B")},105:function(n,t){return r.LD.LD_R_R(n,"L","C")},106:function(n,t){return r.LD.LD_R_R(n,"L","D")},107:function(n,t){return r.LD.LD_R_R(n,"L","E")},108:function(n,t){return r.LD.LD_R_R(n,"L","H")},109:function(n,t){return r.LD.LD_R_R(n,"L","L")},110:function(n,t){return r.LD.LD_R_RADR(n,t,"L","HL")},111:function(n,t){return r.LD.LD_R_R(n,"L","A")},112:function(n,t){return r.LD.LD_RADR_R(n,t,"HL","B")},113:function(n,t){return r.LD.LD_RADR_R(n,t,"HL","C")},114:function(n,t){return r.LD.LD_RADR_R(n,t,"HL","D")},115:function(n,t){return r.LD.LD_RADR_R(n,t,"HL","E")},116:function(n,t){return r.LD.LD_RADR_R(n,t,"HL","H")},117:function(n,t){return r.LD.LD_RADR_R(n,t,"HL","L")},118:function(n,t){return r.INT.HALT(n,t)},119:function(n,t){return r.LD.LD_RADR_R(n,t,"HL","A")},120:function(n,t){return r.LD.LD_R_R(n,"A","B")},121:function(n,t){return r.LD.LD_R_R(n,"A","C")},122:function(n,t){return r.LD.LD_R_R(n,"A","D")},123:function(n,t){return r.LD.LD_R_R(n,"A","E")},124:function(n,t){return r.LD.LD_R_R(n,"A","H")},125:function(n,t){return r.LD.LD_R_R(n,"A","L")},126:function(n,t){return r.LD.LD_R_RADR(n,t,"A","HL")},127:function(n,t){return r.LD.LD_R_R(n,"A","A")},128:function(n,t){return r.ADD.ADD_R_R(n,"A","B")},129:function(n,t){return r.ADD.ADD_R_R(n,"A","C")},130:function(n,t){return r.ADD.ADD_R_R(n,"A","D")},131:function(n,t){return r.ADD.ADD_R_R(n,"A","E")},132:function(n,t){return r.ADD.ADD_R_R(n,"A","H")},133:function(n,t){return r.ADD.ADD_R_R(n,"A","L")},134:function(n,t){return r.ADD.ADD_R_RADR(n,t,"A","HL")},135:function(n,t){return r.ADD.ADD_R_R(n,"A","A")},136:function(n,t){return r.ADD.ADC_R_R(n,"A","B")},137:function(n,t){return r.ADD.ADC_R_R(n,"A","C")},138:function(n,t){return r.ADD.ADC_R_R(n,"A","D")},139:function(n,t){return r.ADD.ADC_R_R(n,"A","E")},140:function(n,t){return r.ADD.ADC_R_R(n,"A","H")},141:function(n,t){return r.ADD.ADC_R_R(n,"A","L")},142:function(n,t){return r.ADD.ADC_R_RADR(n,t,"A","HL")},143:function(n,t){return r.ADD.ADC_R_R(n,"A","A")},144:function(n,t){return r.ADD.SUB_R_R(n,"A","B")},145:function(n,t){return r.ADD.SUB_R_R(n,"A","C")},146:function(n,t){return r.ADD.SUB_R_R(n,"A","D")},147:function(n,t){return r.ADD.SUB_R_R(n,"A","E")},148:function(n,t){return r.ADD.SUB_R_R(n,"A","H")},149:function(n,t){return r.ADD.SUB_R_R(n,"A","L")},150:function(n,t){return r.ADD.SUB_R_RADR(n,t,"A","HL")},151:function(n,t){return r.ADD.SUB_R_R(n,"A","A")},152:function(n,t){return r.ADD.SBC_R_R(n,"A","B")},153:function(n,t){return r.ADD.SBC_R_R(n,"A","C")},154:function(n,t){return r.ADD.SBC_R_R(n,"A","D")},155:function(n,t){return r.ADD.SBC_R_R(n,"A","E")},156:function(n,t){return r.ADD.SBC_R_R(n,"A","H")},157:function(n,t){return r.ADD.SBC_R_R(n,"A","L")},158:function(n,t){return r.ADD.SBC_R_RADR(n,t,"A","HL")},159:function(n,t){return r.ADD.SBC_R_R(n,"A","A")},160:function(n,t){return r.LOGIC.AND_R_R(n,"B")},161:function(n,t){return r.LOGIC.AND_R_R(n,"C")},162:function(n,t){return r.LOGIC.AND_R_R(n,"D")},163:function(n,t){return r.LOGIC.AND_R_R(n,"E")},164:function(n,t){return r.LOGIC.AND_R_R(n,"H")},165:function(n,t){return r.LOGIC.AND_R_R(n,"L")},166:function(n,t){return r.LOGIC.AND_RADR(n,t,"HL")},167:function(n,t){return r.LOGIC.AND_R_R(n,"A")},168:function(n,t){return r.LOGIC.XOR_R(n,"B")},169:function(n,t){return r.LOGIC.XOR_R(n,"C")},170:function(n,t){return r.LOGIC.XOR_R(n,"D")},171:function(n,t){return r.LOGIC.XOR_R(n,"E")},172:function(n,t){return r.LOGIC.XOR_R(n,"H")},173:function(n,t){return r.LOGIC.XOR_R(n,"L")},174:function(n,t){return r.LOGIC.XOR_RADR(n,t,"HL")},175:function(n,t){return r.LOGIC.XOR_R(n,"A")},176:function(n,t){return r.LOGIC.OR_R_R(n,"B")},177:function(n,t){return r.LOGIC.OR_R_R(n,"C")},178:function(n,t){return r.LOGIC.OR_R_R(n,"D")},179:function(n,t){return r.LOGIC.OR_R_R(n,"E")},180:function(n,t){return r.LOGIC.OR_R_R(n,"H")},181:function(n,t){return r.LOGIC.OR_R_R(n,"L")},182:function(n,t){return r.LOGIC.OR_R_ADR(n,t,"HL")},183:function(n,t){return r.LOGIC.OR_R_R(n,"A")},184:function(n,t){return r.ADD.CP_R(n,"B")},185:function(n,t){return r.ADD.CP_R(n,"C")},186:function(n,t){return r.ADD.CP_R(n,"D")},187:function(n,t){return r.ADD.CP_R(n,"E")},188:function(n,t){return r.ADD.CP_R(n,"H")},189:function(n,t){return r.ADD.CP_R(n,"L")},190:function(n,t){return r.ADD.CP_RADR(n,t,"HL")},191:function(n,t){return r.ADD.CP_R(n,"A")},192:function(n,t){return r.JUMP.RET_CC0_ADR(n,t,"Z")},193:function(n,t){return r.JUMP.POP_RR(n,t,"BC")},194:function(n,t){return r.JUMP.JP_CC0_ADR(n,t,"Z")},195:function(n,t){return r.JUMP.JP_ADR(n,t)},196:function(n,t){return r.JUMP.CALL_CC0_ADR(n,t,"Z")},197:function(n,t){return r.JUMP.PUSH_RR(n,t,"BC")},198:function(n,t){return r.ADD.ADD_R_N(n,t,"A")},199:function(n,t){return r.JUMP.RST(n,t,0)},200:function(n,t){return r.JUMP.RET_CC1_ADR(n,t,"Z")},201:function(n,t){return r.JUMP.RET_ADR(n,t)},202:function(n,t){return r.JUMP.JP_CC1_ADR(n,t,"Z")},204:function(n,t){return r.JUMP.CALL_CC1_ADR(n,t,"Z")},205:function(n,t){return r.JUMP.CALL_ADR(n,t)},206:function(n,t){return r.ADD.ADC_R_N(n,t,"A")},207:function(n,t){return r.JUMP.RST(n,t,8)},208:function(n,t){return r.JUMP.RET_CC0_ADR(n,t,"C")},209:function(n,t){return r.JUMP.POP_RR(n,t,"DE")},210:function(n,t){return r.JUMP.JP_CC0_ADR(n,t,"C")},212:function(n,t){return r.JUMP.CALL_CC0_ADR(n,t,"C")},213:function(n,t){return r.JUMP.PUSH_RR(n,t,"DE")},214:function(n,t){return r.ADD.SUB_R_N(n,t,"A")},215:function(n,t){return r.JUMP.RST(n,t,16)},216:function(n,t){return r.JUMP.RET_CC1_ADR(n,t,"C")},217:function(n,t){return r.JUMP.RETI(n,t)},218:function(n,t){return r.JUMP.JP_CC1_ADR(n,t,"C")},220:function(n,t){return r.JUMP.CALL_CC1_ADR(n,t,"C")},222:function(n,t){return r.ADD.SBC_R_N(n,t,"A")},223:function(n,t){return r.JUMP.RST(n,t,24)},224:function(n,t){return r.LD.LD_DADR_R(n,t,"A")},225:function(n,t){return r.JUMP.POP_RR(n,t,"HL")},226:function(n,t){return r.LD.LD_DR_R(n,t,"C","A")},229:function(n,t){return r.JUMP.PUSH_RR(n,t,"HL")},230:function(n,t){return r.LOGIC.AND_R_N(n,t)},231:function(n,t){return r.JUMP.RST(n,t,32)},232:function(n,t){return r.ADD.ADD_R_NN(n,t,"SP")},233:function(n,t){return r.JUMP.JP_RADR(n,"HL")},234:function(n,t){return r.LD.LD_ADR_R(n,t,"A")},238:function(n,t){return r.LOGIC.XOR_N(n,t)},239:function(n,t){return r.JUMP.RST(n,t,40)},240:function(n,t){return r.LD.LD_R_DADR(n,t,"A")},241:function(n,t){return r.JUMP.POP_RR(n,t,"AF")},242:function(n,t){return r.LD.LD_R_DR(n,t,"A","C")},243:function(n,t){return r.INT.DI(n)},245:function(n,t){return r.JUMP.PUSH_RR(n,t,"AF")},246:function(n,t){return r.LOGIC.OR_N(n,t)},247:function(n,t){return r.JUMP.RST(n,t,48)},248:function(n,t){return r.LD.LD_R_SPD(n,t,"HL")},249:function(n,t){return r.LD.LD_R_R(n,"SP","HL")},250:function(n,t){return r.LD.LD_R_ADR(n,t,"A")},251:function(n,t){return r.INT.EI(n)},254:function(n,t){return r.ADD.CP_N(n,t)},255:function(n,t){return r.JUMP.RST(n,t,56)}};exports.OPCODES=t;var u={0:function(n,t){return r.SHIFT.RLC(n,"B",!0)},1:function(n,t){return r.SHIFT.RLC(n,"C",!0)},2:function(n,t){return r.SHIFT.RLC(n,"D",!0)},3:function(n,t){return r.SHIFT.RLC(n,"E",!0)},4:function(n,t){return r.SHIFT.RLC(n,"H",!0)},5:function(n,t){return r.SHIFT.RLC(n,"L",!0)},6:function(n,t){return r.SHIFT.RLC_RADR(n,t,"HL")},7:function(n,t){return r.SHIFT.RLC(n,"A",!0)},8:function(n,t){return r.SHIFT.RRC(n,"B",!0)},9:function(n,t){return r.SHIFT.RRC(n,"C",!0)},10:function(n,t){return r.SHIFT.RRC(n,"D",!0)},11:function(n,t){return r.SHIFT.RRC(n,"E",!0)},12:function(n,t){return r.SHIFT.RRC(n,"H",!0)},13:function(n,t){return r.SHIFT.RRC(n,"L",!0)},14:function(n,t){return r.SHIFT.RRC_RADR(n,t,"HL")},15:function(n,t){return r.SHIFT.RRC(n,"A",!0)},16:function(n,t){return r.SHIFT.RL(n,"B",!0)},17:function(n,t){return r.SHIFT.RL(n,"C",!0)},18:function(n,t){return r.SHIFT.RL(n,"D",!0)},19:function(n,t){return r.SHIFT.RL(n,"E",!0)},20:function(n,t){return r.SHIFT.RL(n,"H",!0)},21:function(n,t){return r.SHIFT.RL(n,"L",!0)},22:function(n,t){return r.SHIFT.RL_RADR(n,t,"HL")},23:function(n,t){return r.SHIFT.RL(n,"A",!0)},24:function(n,t){return r.SHIFT.RR(n,"B",!0)},25:function(n,t){return r.SHIFT.RR(n,"C",!0)},26:function(n,t){return r.SHIFT.RR(n,"D",!0)},27:function(n,t){return r.SHIFT.RR(n,"E",!0)},28:function(n,t){return r.SHIFT.RR(n,"H",!0)},29:function(n,t){return r.SHIFT.RR(n,"L",!0)},30:function(n,t){return r.SHIFT.RR_RADR(n,t,"HL")},31:function(n,t){return r.SHIFT.RR(n,"A",!0)},32:function(n,t){return r.SHIFT.SLA(n,"B")},33:function(n,t){return r.SHIFT.SLA(n,"C")},34:function(n,t){return r.SHIFT.SLA(n,"D")},35:function(n,t){return r.SHIFT.SLA(n,"E")},36:function(n,t){return r.SHIFT.SLA(n,"H")},37:function(n,t){return r.SHIFT.SLA(n,"L")},38:function(n,t){return r.SHIFT.SLA_RADR(n,t,"HL")},39:function(n,t){return r.SHIFT.SLA(n,"A")},40:function(n,t){return r.SHIFT.SRA(n,"B")},41:function(n,t){return r.SHIFT.SRA(n,"C")},42:function(n,t){return r.SHIFT.SRA(n,"D")},43:function(n,t){return r.SHIFT.SRA(n,"E")},44:function(n,t){return r.SHIFT.SRA(n,"H")},45:function(n,t){return r.SHIFT.SRA(n,"L")},46:function(n,t){return r.SHIFT.SRA_RADR(n,t,"HL")},47:function(n,t){return r.SHIFT.SRA(n,"A")},48:function(n,t){return r.BIT.SWAP_R(n,"B")},49:function(n,t){return r.BIT.SWAP_R(n,"C")},50:function(n,t){return r.BIT.SWAP_R(n,"D")},51:function(n,t){return r.BIT.SWAP_R(n,"E")},52:function(n,t){return r.BIT.SWAP_R(n,"H")},53:function(n,t){return r.BIT.SWAP_R(n,"L")},54:function(n,t){return r.BIT.SWAP_RADR(n,t,"HL")},55:function(n,t){return r.BIT.SWAP_R(n,"A")},56:function(n,t){return r.SHIFT.SRL(n,"B")},57:function(n,t){return r.SHIFT.SRL(n,"C")},58:function(n,t){return r.SHIFT.SRL(n,"D")},59:function(n,t){return r.SHIFT.SRL(n,"E")},60:function(n,t){return r.SHIFT.SRL(n,"H")},61:function(n,t){return r.SHIFT.SRL(n,"L")},62:function(n,t){return r.SHIFT.SRL_RADR(n,t,"HL")},63:function(n,t){return r.SHIFT.SRL(n,"A")},64:function(n,t){return r.BIT.BIT_R(n,1,"B")},65:function(n,t){return r.BIT.BIT_R(n,1,"C")},66:function(n,t){return r.BIT.BIT_R(n,1,"D")},67:function(n,t){return r.BIT.BIT_R(n,1,"E")},68:function(n,t){return r.BIT.BIT_R(n,1,"H")},69:function(n,t){return r.BIT.BIT_R(n,1,"L")},70:function(n,t){return r.BIT.BIT_RADR(n,t,1,"HL")},71:function(n,t){return r.BIT.BIT_R(n,1,"A")},72:function(n,t){return r.BIT.BIT_R(n,2,"B")},73:function(n,t){return r.BIT.BIT_R(n,2,"C")},74:function(n,t){return r.BIT.BIT_R(n,2,"D")},75:function(n,t){return r.BIT.BIT_R(n,2,"E")},76:function(n,t){return r.BIT.BIT_R(n,2,"H")},77:function(n,t){return r.BIT.BIT_R(n,2,"L")},78:function(n,t){return r.BIT.BIT_RADR(n,t,2,"HL")},79:function(n,t){return r.BIT.BIT_R(n,2,"A")},80:function(n,t){return r.BIT.BIT_R(n,4,"B")},81:function(n,t){return r.BIT.BIT_R(n,4,"C")},82:function(n,t){return r.BIT.BIT_R(n,4,"D")},83:function(n,t){return r.BIT.BIT_R(n,4,"E")},84:function(n,t){return r.BIT.BIT_R(n,4,"H")},85:function(n,t){return r.BIT.BIT_R(n,4,"L")},86:function(n,t){return r.BIT.BIT_RADR(n,t,4,"HL")},87:function(n,t){return r.BIT.BIT_R(n,4,"A")},88:function(n,t){return r.BIT.BIT_R(n,8,"B")},89:function(n,t){return r.BIT.BIT_R(n,8,"C")},90:function(n,t){return r.BIT.BIT_R(n,8,"D")},91:function(n,t){return r.BIT.BIT_R(n,8,"E")},92:function(n,t){return r.BIT.BIT_R(n,8,"H")},93:function(n,t){return r.BIT.BIT_R(n,8,"L")},94:function(n,t){return r.BIT.BIT_RADR(n,t,8,"HL")},95:function(n,t){return r.BIT.BIT_R(n,8,"A")},96:function(n,t){return r.BIT.BIT_R(n,16,"B")},97:function(n,t){return r.BIT.BIT_R(n,16,"C")},98:function(n,t){return r.BIT.BIT_R(n,16,"D")},99:function(n,t){return r.BIT.BIT_R(n,16,"E")},100:function(n,t){return r.BIT.BIT_R(n,16,"H")},101:function(n,t){return r.BIT.BIT_R(n,16,"L")},102:function(n,t){return r.BIT.BIT_RADR(n,t,16,"HL")},103:function(n,t){return r.BIT.BIT_R(n,16,"A")},104:function(n,t){return r.BIT.BIT_R(n,32,"B")},105:function(n,t){return r.BIT.BIT_R(n,32,"C")},106:function(n,t){return r.BIT.BIT_R(n,32,"D")},107:function(n,t){return r.BIT.BIT_R(n,32,"E")},108:function(n,t){return r.BIT.BIT_R(n,32,"H")},109:function(n,t){return r.BIT.BIT_R(n,32,"L")},110:function(n,t){return r.BIT.BIT_RADR(n,t,32,"HL")},111:function(n,t){return r.BIT.BIT_R(n,32,"A")},112:function(n,t){return r.BIT.BIT_R(n,64,"B")},113:function(n,t){return r.BIT.BIT_R(n,64,"C")},114:function(n,t){return r.BIT.BIT_R(n,64,"D")},115:function(n,t){return r.BIT.BIT_R(n,64,"E")},116:function(n,t){return r.BIT.BIT_R(n,64,"H")},117:function(n,t){return r.BIT.BIT_R(n,64,"L")},118:function(n,t){return r.BIT.BIT_RADR(n,t,64,"HL")},119:function(n,t){return r.BIT.BIT_R(n,64,"A")},120:function(n,t){return r.BIT.BIT_R(n,128,"B")},121:function(n,t){return r.BIT.BIT_R(n,128,"C")},122:function(n,t){return r.BIT.BIT_R(n,128,"D")},123:function(n,t){return r.BIT.BIT_R(n,128,"E")},124:function(n,t){return r.BIT.BIT_R(n,128,"H")},125:function(n,t){return r.BIT.BIT_R(n,128,"L")},126:function(n,t){return r.BIT.BIT_RADR(n,t,128,"HL")},127:function(n,t){return r.BIT.BIT_R(n,128,"A")},128:function(n,t){return r.BIT.RES_R(n,1,"B")},129:function(n,t){return r.BIT.RES_R(n,1,"C")},130:function(n,t){return r.BIT.RES_R(n,1,"D")},131:function(n,t){return r.BIT.RES_R(n,1,"E")},132:function(n,t){return r.BIT.RES_R(n,1,"H")},133:function(n,t){return r.BIT.RES_R(n,1,"L")},134:function(n,t){return r.BIT.RES_RADR(n,t,1,"HL")},135:function(n,t){return r.BIT.RES_R(n,1,"A")},136:function(n,t){return r.BIT.RES_R(n,2,"B")},137:function(n,t){return r.BIT.RES_R(n,2,"C")},138:function(n,t){return r.BIT.RES_R(n,2,"D")},139:function(n,t){return r.BIT.RES_R(n,2,"E")},140:function(n,t){return r.BIT.RES_R(n,2,"H")},141:function(n,t){return r.BIT.RES_R(n,2,"L")},142:function(n,t){return r.BIT.RES_RADR(n,t,2,"HL")},143:function(n,t){return r.BIT.RES_R(n,2,"A")},144:function(n,t){return r.BIT.RES_R(n,4,"B")},145:function(n,t){return r.BIT.RES_R(n,4,"C")},146:function(n,t){return r.BIT.RES_R(n,4,"D")},147:function(n,t){return r.BIT.RES_R(n,4,"E")},148:function(n,t){return r.BIT.RES_R(n,4,"H")},149:function(n,t){return r.BIT.RES_R(n,4,"L")},150:function(n,t){return r.BIT.RES_RADR(n,t,4,"HL")},151:function(n,t){return r.BIT.RES_R(n,4,"A")},152:function(n,t){return r.BIT.RES_R(n,8,"B")},153:function(n,t){return r.BIT.RES_R(n,8,"C")},154:function(n,t){return r.BIT.RES_R(n,8,"D")},155:function(n,t){return r.BIT.RES_R(n,8,"E")},156:function(n,t){return r.BIT.RES_R(n,8,"H")},157:function(n,t){return r.BIT.RES_R(n,8,"L")},158:function(n,t){return r.BIT.RES_RADR(n,t,8,"HL")},159:function(n,t){return r.BIT.RES_R(n,8,"A")},160:function(n,t){return r.BIT.RES_R(n,16,"B")},161:function(n,t){return r.BIT.RES_R(n,16,"C")},162:function(n,t){return r.BIT.RES_R(n,16,"D")},163:function(n,t){return r.BIT.RES_R(n,16,"E")},164:function(n,t){return r.BIT.RES_R(n,16,"H")},165:function(n,t){return r.BIT.RES_R(n,16,"L")},166:function(n,t){return r.BIT.RES_RADR(n,t,16,"HL")},167:function(n,t){return r.BIT.RES_R(n,16,"A")},168:function(n,t){return r.BIT.RES_R(n,32,"B")},169:function(n,t){return r.BIT.RES_R(n,32,"C")},170:function(n,t){return r.BIT.RES_R(n,32,"D")},171:function(n,t){return r.BIT.RES_R(n,32,"E")},172:function(n,t){return r.BIT.RES_R(n,32,"H")},173:function(n,t){return r.BIT.RES_R(n,32,"L")},174:function(n,t){return r.BIT.RES_RADR(n,t,32,"HL")},175:function(n,t){return r.BIT.RES_R(n,32,"A")},176:function(n,t){return r.BIT.RES_R(n,64,"B")},177:function(n,t){return r.BIT.RES_R(n,64,"C")},178:function(n,t){return r.BIT.RES_R(n,64,"D")},179:function(n,t){return r.BIT.RES_R(n,64,"E")},180:function(n,t){return r.BIT.RES_R(n,64,"H")},181:function(n,t){return r.BIT.RES_R(n,64,"L")},182:function(n,t){return r.BIT.RES_RADR(n,t,64,"HL")},183:function(n,t){return r.BIT.RES_R(n,64,"A")},184:function(n,t){return r.BIT.RES_R(n,128,"B")},185:function(n,t){return r.BIT.RES_R(n,128,"C")},186:function(n,t){return r.BIT.RES_R(n,128,"D")},187:function(n,t){return r.BIT.RES_R(n,128,"E")},188:function(n,t){return r.BIT.RES_R(n,128,"H")},189:function(n,t){return r.BIT.RES_R(n,128,"L")},190:function(n,t){return r.BIT.RES_RADR(n,t,128,"HL")},191:function(n,t){return r.BIT.RES_R(n,128,"A")},192:function(n,t){return r.BIT.SET_R(n,1,"B")},193:function(n,t){return r.BIT.SET_R(n,1,"C")},194:function(n,t){return r.BIT.SET_R(n,1,"D")},195:function(n,t){return r.BIT.SET_R(n,1,"E")},196:function(n,t){return r.BIT.SET_R(n,1,"H")},197:function(n,t){return r.BIT.SET_R(n,1,"L")},198:function(n,t){return r.BIT.SET_RADR(n,t,1,"HL")},199:function(n,t){return r.BIT.SET_R(n,1,"A")},200:function(n,t){return r.BIT.SET_R(n,2,"B")},201:function(n,t){return r.BIT.SET_R(n,2,"C")},202:function(n,t){return r.BIT.SET_R(n,2,"D")},203:function(n,t){return r.BIT.SET_R(n,2,"E")},204:function(n,t){return r.BIT.SET_R(n,2,"H")},205:function(n,t){return r.BIT.SET_R(n,2,"L")},206:function(n,t){return r.BIT.SET_RADR(n,t,2,"HL")},207:function(n,t){return r.BIT.SET_R(n,2,"A")},208:function(n,t){return r.BIT.SET_R(n,4,"B")},209:function(n,t){return r.BIT.SET_R(n,4,"C")},210:function(n,t){return r.BIT.SET_R(n,4,"D")},211:function(n,t){return r.BIT.SET_R(n,4,"E")},212:function(n,t){return r.BIT.SET_R(n,4,"H")},213:function(n,t){return r.BIT.SET_R(n,4,"L")},214:function(n,t){return r.BIT.SET_RADR(n,t,4,"HL")},215:function(n,t){return r.BIT.SET_R(n,4,"A")},216:function(n,t){return r.BIT.SET_R(n,8,"B")},217:function(n,t){return r.BIT.SET_R(n,8,"C")},218:function(n,t){return r.BIT.SET_R(n,8,"D")},219:function(n,t){return r.BIT.SET_R(n,8,"E")},220:function(n,t){return r.BIT.SET_R(n,8,"H")},221:function(n,t){return r.BIT.SET_R(n,8,"L")},222:function(n,t){return r.BIT.SET_RADR(n,t,8,"HL")},223:function(n,t){return r.BIT.SET_R(n,8,"A")},224:function(n,t){return r.BIT.SET_R(n,16,"B")},225:function(n,t){return r.BIT.SET_R(n,16,"C")},226:function(n,t){return r.BIT.SET_R(n,16,"D")},227:function(n,t){return r.BIT.SET_R(n,16,"E")},228:function(n,t){return r.BIT.SET_R(n,16,"H")},229:function(n,t){return r.BIT.SET_R(n,16,"L")},230:function(n,t){return r.BIT.SET_RADR(n,t,16,"HL")},231:function(n,t){return r.BIT.SET_R(n,16,"A")},232:function(n,t){return r.BIT.SET_R(n,32,"B")},233:function(n,t){return r.BIT.SET_R(n,32,"C")},234:function(n,t){return r.BIT.SET_R(n,32,"D")},235:function(n,t){return r.BIT.SET_R(n,32,"E")},236:function(n,t){return r.BIT.SET_R(n,32,"H")},237:function(n,t){return r.BIT.SET_R(n,32,"L")},238:function(n,t){return r.BIT.SET_RADR(n,t,32,"HL")},239:function(n,t){return r.BIT.SET_R(n,32,"A")},240:function(n,t){return r.BIT.SET_R(n,64,"B")},241:function(n,t){return r.BIT.SET_R(n,64,"C")},242:function(n,t){return r.BIT.SET_R(n,64,"D")},243:function(n,t){return r.BIT.SET_R(n,64,"E")},244:function(n,t){return r.BIT.SET_R(n,64,"H")},245:function(n,t){return r.BIT.SET_R(n,64,"L")},246:function(n,t){return r.BIT.SET_RADR(n,t,64,"HL")},247:function(n,t){return r.BIT.SET_R(n,64,"A")},248:function(n,t){return r.BIT.SET_R(n,128,"B")},249:function(n,t){return r.BIT.SET_R(n,128,"C")},250:function(n,t){return r.BIT.SET_R(n,128,"D")},251:function(n,t){return r.BIT.SET_R(n,128,"E")},252:function(n,t){return r.BIT.SET_R(n,128,"H")},253:function(n,t){return r.BIT.SET_R(n,128,"L")},254:function(n,t){return r.BIT.SET_RADR(n,t,128,"HL")},255:function(n,t){return r.BIT.SET_R(n,128,"A")}};exports.OPCODES_CB=u;
},{"../util/constants":"xO0K"}],"la4j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CPU=void 0;var t=require("./registers"),s=require("../util/constants"),e=require("./instructions");function r(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function n(t,s){for(var e=0;e<s.length;e++){var r=s[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,s,e){return s&&n(t.prototype,s),e&&n(t,e),t}var o=function(){function n(s,e){r(this,n),this.memory=s,this.registers=new t.Registers,this.graphics=e,this.cycles=new Array(3),this.reset()}return i(n,[{key:"reset",value:function(){this.cycles[0]=0,this.cycles[1]=0,this.cycles[2]=0,this.registers.reset(),this.memory.reset()}},{key:"run",value:function(){var t=this.processInstruction();return this.checkInterruptions(),this.fireInterruptions(),t}},{key:"fireInterruptions",value:function(){if(0!=(4&this.memory.read(s.Constants.TIMER_CRTL))){var t=0;switch(3&this.memory.read(s.Constants.TIMER_CRTL)){case 0:t=s.Constants.CYCLES_TIMER_MODE0;break;case 1:t=s.Constants.CYCLES_TIMER_MODE1;break;case 2:t=s.Constants.CYCLES_TIMER_MODE2;break;case 3:t=s.Constants.CYCLES_TIMER_MODE3}this.cycles[1]>t&&(this.cycles[1]=0,this.memory.write(this.memory.read(s.Constants.TIMER_COUNT)+1,s.Constants.TIMER_COUNT),255==this.memory.read(s.Constants.TIMER_COUNT)&&(this.memory.write(this.memory.read(s.Constants.TIMER_RELOAD),s.Constants.TIMER_COUNT),this.memory.write(this.memory.read(s.Constants.INT_FLAG)|s.Constants.INT_TIMER,s.Constants.INT_FLAG)))}this.cycles[0]>s.Constants.CYCLES_DIV&&(this.memory.write(this.memory.read(s.Constants.DIV_CNTR)+1,s.Constants.DIV_CNTR),this.cycles[0]=0),this.cycles[2]>s.Constants.CYCLES_LCD_MODE1&&(this.cycles[2]=0,153==this.memory.read(s.Constants.LCD_Y_LOC)?this.memory.write(0,s.Constants.LCD_Y_LOC):this.memory.write(this.memory.read(s.Constants.LCD_Y_LOC)+1,s.Constants.LCD_Y_LOC),this.memory.read(s.Constants.LCD_Y_LOC)==this.memory.read(s.Constants.LCD_Y_COMP)?(this.memory.write(4|this.memory.read(s.Constants.LCD_STAT),s.Constants.LCD_STAT),(64&this.memory.read(s.Constants.LCD_STAT))>0&&this.memory.write(this.memory.read(s.Constants.INT_FLAG)|s.Constants.INT_LCDC,s.Constants.INT_FLAG)):this.memory.write(251&this.memory.read(s.Constants.LCD_STAT),s.Constants.LCD_STAT)),this.memory.read(s.Constants.LCD_Y_LOC)<144?this.cycles[2]<s.Constants.CYCLES_LCD_MODE2&&2!=(3&this.memory.read(s.Constants.LCD_STAT))?(this.memory.write(252&this.memory.read(s.Constants.LCD_STAT)|2,s.Constants.LCD_STAT),(32&this.memory.read(s.Constants.LCD_STAT))>0&&this.memory.write(this.memory.read(s.Constants.INT_FLAG)|s.Constants.INT_LCDC,s.Constants.INT_FLAG)):this.cycles[2]>=s.Constants.CYCLES_LCD_MODE2&&this.cycles[2]<s.Constants.CYCLES_LCD_MODE3&&3!=(3&this.memory.read(s.Constants.LCD_STAT))?(this.graphics.hblank(),this.memory.write(252&this.memory.read(s.Constants.LCD_STAT)|3,s.Constants.LCD_STAT)):this.cycles[2]>=s.Constants.CYCLES_LCD_MODE3&&0!=(3&this.memory.read(s.Constants.LCD_STAT))&&(this.memory.write(252&this.memory.read(s.Constants.LCD_STAT),s.Constants.LCD_STAT),(8&this.memory.read(s.Constants.LCD_STAT))>0&&this.memory.write(this.memory.read(s.Constants.INT_FLAG)|s.Constants.INT_LCDC,s.Constants.INT_FLAG)):this.memory.read(s.Constants.LCD_Y_LOC)>=144&&1!=(3&this.memory.read(s.Constants.LCD_STAT))&&(this.graphics.vblank(),this.memory.write(252&this.memory.read(s.Constants.LCD_STAT)|1,s.Constants.LCD_STAT),(16&this.memory.read(s.Constants.LCD_STAT))>0&&this.memory.write(this.memory.read(s.Constants.INT_FLAG)|s.Constants.INT_LCDC,s.Constants.INT_FLAG),this.memory.write(this.memory.read(s.Constants.INT_FLAG)|s.Constants.INT_VBLANK,s.Constants.INT_FLAG))}},{key:"checkInterruptions",value:function(){1==this.registers.flagIME&&(this.callInterruption(s.Constants.INT_VBLANK,64)||this.callInterruption(s.Constants.INT_LCDC,72)||this.callInterruption(s.Constants.INT_TIMER,80)||this.callInterruption(s.Constants.INT_SERIALTX,88)||this.callInterruption(s.Constants.INT_KEY,96))}},{key:"callInterruption",value:function(t,e){return(this.memory.read(s.Constants.INT_FLAG)&t)>0&&(this.memory.read(s.Constants.INT_ENABLE)&t)>0&&(this.memory.write(this.memory.read(s.Constants.INT_FLAG)&~t,s.Constants.INT_FLAG),this.registers.SP--,this.memory.write((65280&this.registers.PC)>>8,this.registers.SP),this.registers.SP--,this.memory.write(255&this.registers.PC,this.registers.SP),this.registers.PC=e,!0)}},{key:"processInstruction",value:function(){var t,s=this.memory.read(this.registers.PC);if(203==s?(this.registers.PC++,t=e.OPCODES_CB[this.memory.read(this.registers.PC)]):t=e.OPCODES[s],!t)throw new Error("[ERROR] Invalid opcode 0x".concat(s.toString(16).toUpperCase()));for(var r=t(this.registers,this.memory),n=0;n<this.cycles.length;n++)this.cycles[n]+=r;return r}}]),n}();exports.CPU=o;
},{"./registers":"jk5o","../util/constants":"xO0K","./instructions":"JOih"}],"MO7a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderScreen=void 0;var t=require("./util/constants");function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function e(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function a(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}var s=function(){function e(a){n(this,e),this.canvasContext=a.getContext("2d"),this.canvasContext&&(this.canvasContext.canvas.width=t.Constants.SCREEN_WIDTH,this.canvasContext.canvas.height=t.Constants.SCREEN_HEIGHT,this.canvasContext.imageSmoothingEnabled=!1),this.buffer=new Uint8ClampedArray(4*t.Constants.SCREEN_HEIGHT*t.Constants.SCREEN_WIDTH),this.image=new ImageData(this.buffer,t.Constants.SCREEN_WIDTH,t.Constants.SCREEN_HEIGHT),this.palette=t.Constants.DMG_COLORS}return a(e,[{key:"setPalette",value:function(t){this.palette=t}},{key:"refresh",value:function(n){for(var e=this,a=0;a<t.Constants.SCREEN_HEIGHT;a++)for(var s=0;s<t.Constants.SCREEN_WIDTH;s++){var o=a*t.Constants.SCREEN_WIDTH*4+4*s,r=this.palette[n[a*t.Constants.SCREEN_WIDTH+s]];this.buffer[o]=(16711680&r)>>16,this.buffer[o+1]=(65280&r)>>8,this.buffer[o+2]=255&r,this.buffer[o+3]=255}createImageBitmap(this.image).then(function(n){e.canvasContext&&e.canvasContext.drawImage(n,0,0,t.Constants.SCREEN_WIDTH,t.Constants.SCREEN_HEIGHT)})}}]),e}();exports.RenderScreen=s;
},{"./util/constants":"xO0K"}],"ABrV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Memory=void 0;var t=require("../util/constants");function s(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function i(t,s){for(var i=0;i<s.length;i++){var n=s[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,s,n){return s&&i(t.prototype,s),n&&i(t,n),t}var e=function(){function i(n,e){s(this,i),this.ram=new Uint8Array(t.Constants.MEMSIZE),this.cartridge=n,this.keypad=e}return n(i,[{key:"read",value:function(t){return 255&((t&=65535)>=0&&t<32768?this.cartridge.read(t):t>=40960&&t<49152?this.cartridge.read(t):this.ram[t])}},{key:"readWord",value:function(t){return 65535&(this.read(t+2)<<8|this.read(t+1))}},{key:"write",value:function(t,s){t&=255,(s&=65535)>=0&&s<32768?this.cartridge.write(t,s):s>=40960&&s<49152?this.cartridge.write(t,s):s>=49152&&s<57344?this.ram[s]=t:s>=65280?this.writeIO(t,s):this.ram[s]=t}},{key:"writeIO",value:function(s,i){switch(i){case t.Constants.JOYPAD:this.ram[t.Constants.JOYPAD]=s,this.writeKeypad();break;case t.Constants.LCD_DMA:this.ram[t.Constants.LCD_DMA]=s;var n=this.ram[t.Constants.LCD_DMA]<<8;this.ram.copyWithin(65024,n,n+160);break;case t.Constants.DIV_CNTR:this.ram[t.Constants.DIV_CNTR]=0;break;default:this.ram[i]=s}}},{key:"writeKeypad",value:function(){var s=this.ram[t.Constants.JOYPAD];s&=240;var i=this.keypad.keys;switch(s){case 48:s=63;break;case 32:i[0]||(s|=8),i[1]||(s|=4),i[2]||(s|=2),i[3]||(s|=1);break;case 16:i[4]||(s|=8),i[5]||(s|=4),i[6]||(s|=2),i[7]||(s|=1)}this.ram[t.Constants.JOYPAD]=s}},{key:"reset",value:function(){this.write(207,t.Constants.JOYPAD),this.write(0,t.Constants.SERIAL_DATA),this.write(126,t.Constants.SERIAL_CTRL),this.write(255,65283),this.write(175,t.Constants.DIV_CNTR),this.write(0,t.Constants.TIMER_COUNT),this.write(0,t.Constants.TIMER_RELOAD),this.write(248,t.Constants.TIMER_CRTL),this.write(0,t.Constants.INT_FLAG),this.write(128,t.Constants.SND_1_ENT),this.write(191,t.Constants.SND_1_WAV_LEN),this.write(243,t.Constants.SND_1_ENV),this.write(255,t.Constants.SND_1_FREQ_KICK_LOWER),this.write(191,t.Constants.SND_1_FREQ_KICK_UPPER),this.write(255,65301),this.write(63,t.Constants.SND_2_WAVE_LEN),this.write(0,t.Constants.SND_2_ENV),this.write(255,t.Constants.SND_2_FREQ_KICK_LOWER),this.write(191,t.Constants.SND_2_FREQ_KICK_UPPER),this.write(127,t.Constants.SND_3_ON_OFF),this.write(255,t.Constants.SND_3_LEN),this.write(159,t.Constants.SND_3_VOLUME),this.write(255,t.Constants.SND_3_FREQ_KICK_LOWER),this.write(191,t.Constants.SND_3_FREQ_KICK_UPPER),this.write(255,65310),this.write(255,65311),this.write(255,t.Constants.SND_4_LEN),this.write(0,t.Constants.SND_4_ENV),this.write(0,t.Constants.SND_4_POLY_KICK_LOWER),this.write(191,t.Constants.SND_4_POLY_KICK_UPPER),this.write(119,t.Constants.SND_VOICE_INP),this.write(243,t.Constants.SND_STEREO),this.write(241,t.Constants.SND_STAT),this.write(6,t.Constants.SND_BNK_10),this.write(254,t.Constants.SND_BNK_11),this.write(14,t.Constants.SND_BNK_12),this.write(127,t.Constants.SND_BNK_13),this.write(0,t.Constants.SND_BNK_14),this.write(255,t.Constants.SND_BNK_15),this.write(88,t.Constants.SND_BNK_16),this.write(223,t.Constants.SND_BNK_17),this.write(0,t.Constants.SND_BNK_20),this.write(236,t.Constants.SND_BNK_21),this.write(0,t.Constants.SND_BNK_22),this.write(191,t.Constants.SND_BNK_23),this.write(12,t.Constants.SND_BNK_24),this.write(237,t.Constants.SND_BNK_25),this.write(3,t.Constants.SND_BNK_26),this.write(247,t.Constants.SND_BNK_27),this.write(145,t.Constants.LCD_CTRL),this.write(133,t.Constants.LCD_STAT),this.write(0,t.Constants.LCD_SCROLL_Y),this.write(0,t.Constants.LCD_SCROLL_X),this.write(0,t.Constants.LCD_Y_LOC),this.write(0,t.Constants.LCD_Y_COMP),this.write(0,t.Constants.LCD_DMA),this.write(252,t.Constants.LCD_BACK_PALETTE),this.write(255,t.Constants.LCD_SPR0_PALETTE),this.write(255,t.Constants.LCD_SPR1_PALETTE),this.write(0,t.Constants.LCD_WIN_Y),this.write(0,t.Constants.LCD_WIN_X),this.write(126,t.Constants.CPU_SPEED_REG),this.write(255,65358),this.write(254,t.Constants.VRAM_BANK),this.write(255,65360),this.write(0,t.Constants.DMA_SRC_UPPER),this.write(0,t.Constants.DMA_SRC_LOWER),this.write(0,t.Constants.DMA_DST_UPPER),this.write(0,t.Constants.DMA_DST_LOWER),this.write(255,t.Constants.DMA_LEN_TYPE),this.write(0,t.Constants.IR_PORT),this.write(192,t.Constants.BGP_INDEX),this.write(0,t.Constants.BGP_DATA),this.write(193,t.Constants.OBP_INDEX),this.write(0,t.Constants.OBP_DATA),this.write(248,t.Constants.RAM_BANK),this.write(0,t.Constants.INT_ENABLE)}}]),i}();exports.Memory=e;
},{"../util/constants":"xO0K"}],"YYnm":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Keypad=void 0;var o=function(){function t(){e(this,t),this.keys=[!1,!1,!1,!1,!1,!1,!1,!1]}return n(t,[{key:"toggleKey",value:function(e){this.keys[e]=!this.keys[e]}},{key:"keyDown",value:function(e){this.keys[e]=!0}},{key:"keyUp",value:function(e){this.keys[e]=!1}}]),t}();exports.Keypad=o;
},{}],"qpGd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Main=void 0;var e=require("./peripherals"),r=require("./kernel/gpu"),a=require("./kernel/cpu"),n=require("./render"),t=require("./kernel/memory"),s=require("./peripherals/keypad"),c=require("./util/constants");function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,r,a){return r&&o(e.prototype,r),a&&o(e,a),e}var l=function(){function o(e){i(this,o),this.keypad=new s.Keypad,this.screen=new n.RenderScreen(e)}return u(o,[{key:"name",get:function(){return this.cartridge.name}},{key:"palette",set:function(e){this.screen.setPalette(e)}},{key:"keys",get:function(){return this.keypad}},{key:"loadData",value:function(e){this.cartridge=this.loadCartridge(e);var n=new t.Memory(this.cartridge,this.keypad),s=new r.GPU(n,this.screen);this.cpu=new a.CPU(n,s)}},{key:"start",value:function(){var e=this,r=null;requestAnimationFrame(function a(n){var t=null;if(null!=r&&(t=n-r),t)for(var s=0;s/(1e3*c.Constants.CPU_SPEED)<t;)s+=e.cpu.run();r=n,requestAnimationFrame(a)})}},{key:"loadCartridge",value:function(r){var a;switch(r[327]){case 0:a=new e.MBC0(r);break;case 1:case 2:case 3:a=new e.MBC1(r);break;case 4:case 5:case 6:a=new e.MBC2(r);break;case 7:case 8:case 9:a=new e.MBC0(r);break;case 10:case 11:case 12:case 13:a=new e.MBC0(r);break;case 14:case 15:case 16:case 17:case 18:case 19:a=new e.MBC3(r);break;case 20:case 21:case 22:case 23:a=new e.MBC4(r);break;case 24:case 25:case 26:case 27:case 28:case 29:case 30:a=new e.MBC5(r);break;case 31:case 253:a=new e.MBC0(r);break;case 254:a=new e.MBC3(r);break;case 255:a=new e.MBC1(r);break;default:throw new Error("[ERROR] Unknown cartridge type "+r[327])}if(128==r[323])throw new Error("GameBoy Color not supported");return 0!=r[326]&&console.log("SuperGameBoy capabilities not supported"),a}}]),o}();exports.Main=l;
},{"./peripherals":"BLXM","./kernel/gpu":"w7UQ","./kernel/cpu":"la4j","./render":"MO7a","./kernel/memory":"ABrV","./peripherals/keypad":"YYnm","./util/constants":"xO0K"}],"VjWW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Key=void 0;var t,s=require("./constants");exports.Key=t,function(t){t[t.Down=s.Constants.KEY_DOWN]="Down",t[t.Up=s.Constants.KEY_UP]="Up",t[t.Left=s.Constants.KEY_LEFT]="Left",t[t.Right=s.Constants.KEY_RIGHT]="Right",t[t.Start=s.Constants.KEY_START]="Start",t[t.Select=s.Constants.KEY_SELECT]="Select",t[t.B=s.Constants.KEY_B]="B",t[t.A=s.Constants.KEY_A]="A"}(t||(exports.Key=t={}));
},{"./constants":"xO0K"}],"QCba":[function(require,module,exports) {
"use strict";var e=require("tslib");require("regenerator-runtime/runtime");var n,t=require("./src/app/tsgbe"),r=require("./src/app/util/key"),o=5;function y(t){return(0,e.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.target.files.length>0)){e.next=8;break}return e.next=3,u(t.target.files[0]);case 3:r=e.sent,o=new Uint8Array(r),n.loadData(o),n.start(),console.log(n.name);case 8:case"end":return e.stop()}},e)}))}function u(e){return new Promise(function(n,t){try{var r=new FileReader;r.readAsArrayBuffer(e),r.onload=function(){n(r.result)}}catch(o){t(o)}})}document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("power"),u=document.querySelector("#file-input");e.addEventListener("click",function(e){return u.click()}),u.addEventListener("change",function(e){return y(e)}),document.querySelector("#up").addEventListener("mousedown",function(){window.navigator.vibrate(o),n.keys.keyDown(r.Key.Up)}),document.querySelector("#up").addEventListener("mouseup",function(){return n.keys.keyUp(r.Key.Up)}),document.querySelector("#down").addEventListener("mousedown",function(){window.navigator.vibrate(o),n.keys.keyDown(r.Key.Down)}),document.querySelector("#down").addEventListener("mouseup",function(){return n.keys.keyUp(r.Key.Down)}),document.querySelector("#left").addEventListener("mousedown",function(){window.navigator.vibrate(o),n.keys.keyDown(r.Key.Left)}),document.querySelector("#left").addEventListener("mouseup",function(){return n.keys.keyUp(r.Key.Left)}),document.querySelector("#right").addEventListener("mousedown",function(){window.navigator.vibrate(o),n.keys.keyDown(r.Key.Right)}),document.querySelector("#right").addEventListener("mouseup",function(){return n.keys.keyUp(r.Key.Right)}),document.querySelector("#start").addEventListener("mousedown",function(){window.navigator.vibrate(o),n.keys.keyDown(r.Key.Start)}),document.querySelector("#start").addEventListener("mouseup",function(){return n.keys.keyUp(r.Key.Start)}),document.querySelector("#select").addEventListener("mousedown",function(){window.navigator.vibrate(o),n.keys.keyDown(r.Key.Select)}),document.querySelector("#select").addEventListener("mouseup",function(){return n.keys.keyUp(r.Key.Select)}),document.querySelector("#btn-a").addEventListener("mousedown",function(){window.navigator.vibrate(o),n.keys.keyDown(r.Key.A)}),document.querySelector("#btn-a").addEventListener("mouseup",function(){return n.keys.keyUp(r.Key.A)}),document.querySelector("#btn-b").addEventListener("mousedown",function(){window.navigator.vibrate(o),n.keys.keyDown(r.Key.B)}),document.querySelector("#btn-b").addEventListener("mouseup",function(){return n.keys.keyUp(r.Key.B)}),n=new t.Main(document.getElementById("canvas"))}),document.onkeydown=function(e){switch(e.keyCode){case 13:n.keys.keyDown(r.Key.Start);break;case 16:n.keys.keyDown(r.Key.Select);break;case 90:n.keys.keyDown(r.Key.A);break;case 88:n.keys.keyDown(r.Key.B);break;case 38:n.keys.keyDown(r.Key.Up);break;case 40:n.keys.keyDown(r.Key.Down);break;case 37:n.keys.keyDown(r.Key.Left);break;case 39:n.keys.keyDown(r.Key.Right)}},document.onkeyup=function(e){switch(e.keyCode){case 13:n.keys.keyUp(r.Key.Start);break;case 16:n.keys.keyUp(r.Key.Select);break;case 90:n.keys.keyUp(r.Key.A);break;case 88:n.keys.keyUp(r.Key.B);break;case 38:n.keys.keyUp(r.Key.Up);break;case 40:n.keys.keyUp(r.Key.Down);break;case 37:n.keys.keyUp(r.Key.Left);break;case 39:n.keys.keyUp(r.Key.Right)}};
},{"tslib":"CvJj","regenerator-runtime/runtime":"KA2S","./src/app/tsgbe":"qpGd","./src/app/util/key":"VjWW"}]},{},["QCba"], null)
//# sourceMappingURL=tsgbe.9d4c5faf.js.map